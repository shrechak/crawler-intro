var webengage=webengage||{};var _weq=_weq||{};(function(){var a={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(b){if(null==b){return""}var v,q,d,u,s,m,p,g="",k=0;for(b=a.compress(b);k<2*b.length;){k%2==0?(v=b.charCodeAt(k/2)>>8,q=255&b.charCodeAt(k/2),d=k/2+1<b.length?b.charCodeAt(k/2+1)>>8:0/0):(v=255&b.charCodeAt((k-1)/2),(k+1)/2<b.length?(q=b.charCodeAt((k+1)/2)>>8,d=255&b.charCodeAt((k+1)/2)):q=d=0/0),k+=3,u=v>>2,s=(3&v)<<4|q>>4,m=(15&q)<<2|d>>6,p=63&d,isNaN(q)?m=p=64:isNaN(d)&&(p=64),g=g+a._keyStr.charAt(u)+a._keyStr.charAt(s)+a._keyStr.charAt(m)+a._keyStr.charAt(p)}return g},compress:function(b){if(null==b){return""}var F,z,q,E={},D={},x="",y="",u="",v=2,w=3,k=2,G="",m=0,B=0,g=a._f;for(q=0;q<b.length;q+=1){if(x=b.charAt(q),Object.prototype.hasOwnProperty.call(E,x)||(E[x]=w++,D[x]=!0),y=u+x,Object.prototype.hasOwnProperty.call(E,y)){u=y}else{if(Object.prototype.hasOwnProperty.call(D,u)){if(u.charCodeAt(0)<256){for(F=0;k>F;F++){m<<=1,15==B?(B=0,G+=g(m),m=0):B++}for(z=u.charCodeAt(0),F=0;8>F;F++){m=m<<1|1&z,15==B?(B=0,G+=g(m),m=0):B++,z>>=1}}else{for(z=1,F=0;k>F;F++){m=m<<1|z,15==B?(B=0,G+=g(m),m=0):B++,z=0}for(z=u.charCodeAt(0),F=0;16>F;F++){m=m<<1|1&z,15==B?(B=0,G+=g(m),m=0):B++,z>>=1}}v--,0==v&&(v=Math.pow(2,k),k++),delete D[u]}else{for(z=E[u],F=0;k>F;F++){m=m<<1|1&z,15==B?(B=0,G+=g(m),m=0):B++,z>>=1}}v--,0==v&&(v=Math.pow(2,k),k++),E[y]=w++,u=String(x)}}if(""!==u){if(Object.prototype.hasOwnProperty.call(D,u)){if(u.charCodeAt(0)<256){for(F=0;k>F;F++){m<<=1,15==B?(B=0,G+=g(m),m=0):B++}for(z=u.charCodeAt(0),F=0;8>F;F++){m=m<<1|1&z,15==B?(B=0,G+=g(m),m=0):B++,z>>=1}}else{for(z=1,F=0;k>F;F++){m=m<<1|z,15==B?(B=0,G+=g(m),m=0):B++,z=0}for(z=u.charCodeAt(0),F=0;16>F;F++){m=m<<1|1&z,15==B?(B=0,G+=g(m),m=0):B++,z>>=1}}v--,0==v&&(v=Math.pow(2,k),k++),delete D[u]}else{for(z=E[u],F=0;k>F;F++){m=m<<1|1&z,15==B?(B=0,G+=g(m),m=0):B++,z>>=1}}v--,0==v&&(v=Math.pow(2,k),k++)}for(z=2,F=0;k>F;F++){m=m<<1|1&z,15==B?(B=0,G+=g(m),m=0):B++,z>>=1}for(;;){if(m<<=1,15==B){G+=g(m);break}B++}return G}};webengage.LZString=a})();webengage.eLog=function(f,h,d,b,m,c){if(f instanceof Error){d=f.stack||f.description;d=(d.length>900?d.substring(0,900):d);b=f.message||d.substring(0,50);h="exception"}if(h){if(c&&m){var a="{'version':'"+webengage.getWidgetVersion()+"','text':'"+d+"', 'et':'"+m+"', 'eid':'"+c+"'}"}else{var a="{'version':'"+webengage.getWidgetVersion()+"','text':'"+d+"'}"}var g=(h==="error"?"//c.webengage.com/e.jpg":"//c.webengage.com/e.jpg");if(webengage.winUnloading&&h==="error"){return}var k=new Image();k.src=g+"?event="+encodeURIComponent(b)+"&category="+_weq["webengage.licenseCode"]+"&type="+h+"&data="+encodeURIComponent(a)+"&ts="+(new Date()).getTime()}};webengage.withELog=function(c,a,b){if(typeof c==="function"){try{if(!(a instanceof Array)){a=[]}return c.apply(undefined,a)}catch(d){webengage.eLog(d);if(!b){throw d}}}else{throw new Error("WithELog : first argument not a function")}};webengage.setTimeout=function(a,b){return setTimeout(function(){webengage.withELog(a)},b)};webengage.setInterval=function(b,a){return setInterval(function(){webengage.withELog(b)},a)};webengage.setTimeout(function(){(function(d,a,f,c,e){var b=function(){var m=null,n=function(G,F,D){var E=(typeof(D)==="boolean"?D:true);for(var C in F){if(G[C]===e||E){G[C]=F[C]}}return G},x={};n(c,{util:{copy:function(E,D,C){return n(E,D,C)},loadScript:function(F,G,C,H){var E=a.createElement("script");E.type="text/javascript";E.charset="UTF-8";E.async=true;E.src=F;E.callBack=G;E.callBackArgs=C||[];E.errorCallBack=H;this.appendChild(E);if(c.BrowserDetect.ie()&&c.BrowserDetect.version()<11&&E.readyState){if(typeof G==="function"){var D=function(){if(E.readyState=="loaded"||E.readyState=="complete"){c.withELog(G,C)}};E.defer=true;E.onreadystatechange=D}}else{c.util.addListener(E,"load",function(I){c.withELog(G,C)});c.util.addListener(E,"error",function(I){if(c.getWidgetVersion()!=="3.0"){c.eLog(null,"error","could not load - "+F,"script loading error")}if(typeof H==="function"){c.withELog(H,[I])}})}},createObj:function(D){var E=c,C=D?D.split("."):[];for(var F=0;F<C.length;F++){var H=C[F],G=E[H];if(!G){G={};E[H]=G}E=G}return E},extend:function(C,D){return c.util.copy((typeof C=="string"?c.util.createObj(C):C),D)},isJqueryPresent:function(){return(d.jQuery!==e&&parseFloat("."+d.jQuery().jquery.replace(/\./g,""))>=0.13)},applyCss:function(E,D){try{for(var C in D){if(typeof D[C]=="function"){E.style[C]=D[C]()}else{E.style[C]=D[C]}}}catch(F){}return E},inArray:function(C,E){for(var D=0;D<C.length;D++){if(C[D]==E){return true}}return false},getMaxZIndex:function(){if(this.maxZIndex===e){this.maxZIndex=16776271}return this.maxZIndex++},alignCenter:function(F,E,D){var C=(D=="left")?"right":"left";F.style.top=((parseInt(c.util.getElementHeight(E),10)-parseInt(c.util.getElementHeight(F),10))/2-(/Firefox/i.test(navigator.userAgent)?7:0))+"px";F.style[C]=(parseInt(c.util.getElementWidth(E),10)-parseInt(c.util.getElementWidth(F),10))/2+10+"px"},getElementWidth:function(C){if(C.clip!==e){return C.clip.width}else{if(C.style.pixelWidth){return C.style.pixelWidth}else{return C.offsetWidth}}},getElementHeight:function(C){if(C.clip!==e){return C.clip.height}else{if(C.style.pixelHeight){return C.style.pixelHeight}else{return C.offsetHeight}}},isSupportsLocalStorage:function(E){try{var C=(typeof(Storage)!=="undefined"&&"localStorage" in d&&d.localStorage!==null);if(!E&&C){d.localStorage["_we_dm_ios_sup_f_"]="true";d.localStorage.removeItem("_we_dm_ios_sup_f_")}return C}catch(D){return false}},getWindowHeight:function(){return"innerHeight" in d?d.innerHeight:a.documentElement.offsetHeight},getWindowWidth:function(){return"innerWidth" in d?d.innerWidth:a.documentElement.offsetWidth},getInitParamValue:function(C,G,D,F){var E=D!==e?D:null;if(C&&C[G]){var H=C[G];if(F){if(c.util.inArray(F,H)){E=H}}else{E=H}}return E},getInitParamValueAsArray:function(C,I,F,H){var G=c.util.getInitParamValue(C,I,F);if(G&&typeof(G)!="object"){G=G.split(/\s*,\s*/)}if(H&&typeof(H)=="object"){var D=[];for(var E=0;E<G.length;E++){if(c.util.inArray(H,G[E])){D[D.length]=G[E]}}G=D}return G},setCookie:function(D,J,E,L,G,C,F){if(c.util.isSupportsLocalStorage()&&!F){try{d.localStorage[D]=J;return"ls"}catch(H){d.localStorage.removeItem(D);return c.util.setCookie(D,J,E,L,G,C,true)}}else{if(c.util.isSupportsLocalStorage(true)&&!F){d.localStorage.removeItem(D)}var I=new Date();I.setTime(I.getTime());if(E){E=E*1000*60*60*24}var K=new Date(I.getTime()+(E));a.cookie=D+"="+encodeURIComponent(J)+((E)?";expires="+K.toGMTString():"")+((L)?";path="+L:"")+((G)?";domain="+G:"")+((C)?";secure":"");return"ck"}},getCookie:function(C,E){if(c.util.isSupportsLocalStorage(true)&&!E){return(d.localStorage[C]?d.localStorage[C]:c.util.getCookie(C,true))}else{var I=a.cookie.split(";");var D="";var G="";var H="";var F=false;for(i=0;i<I.length;i++){D=I[i].split("=");G=D[0].replace(/^\s+|\s+$/g,"");if(G==C){F=true;if(D.length>1){H=decodeURIComponent(D[1].replace(/^\s+|\s+$/g,""))}return H===null?"":H}D=null;G=""}if(!F){return null}}},addListener:function(C,D,E){if(C.addEventListener){C.addEventListener(D,E,false)}else{if(C.attachEvent){C.attachEvent("on"+D,E)}}},removeListener:function(C,D,E){if(C.removeEventListener){C.removeEventListener(D,E)}else{if(C.detachEvent){C.detachEvent("on"+D,E)}}},bindEvent:function(C,D){c.util.addListener(d,C,D)},unbindEvent:function(C,D){c.util.removeListener(d,C,D)},getCurrentTime:function(D){var G=new Date();var E=G.getTime();if(D!==e){var F=G.getTimezoneOffset()*60000;var C=E+F;E=C+(1000*D)}return E},getCurrentWeekDay:function(D){var C=u.getCurrentTime();var E=new Date(C);return E.getDay()},setWebengageCookie:function(D){var G=(function(){var H=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return((new Date().getTime())+H()+H()+H()+H())})();var F=D||{};var E={time:(new Date()).getTime(),luid:G};F=this.copy(F,E,false);var C=this.stringify(F);x._we_wk_ls_=F;this.setCookie("_we_wk_ls_",C,99999,"/","","");if(this.firstTimeUser===e){this.firstTimeUser=true}return F},getWebengageCookie:function(){var C=this.getCookie("_we_wk_ls_")||x._we_wk_ls_;if(C){var C=this.getCookie("_we_wk_ls_");if(this.isSupportsLocalStorage()&&this.getCookie("_we_wk_ls_",true)){this.setCookie("_we_wk_ls_",C,-1,"/","","",true);this.setCookie("_we_wk_ls_",C,99999,"/","","")}x._we_wk_ls_=new Function("return "+C)()||null}else{this.setWebengageCookie()}return x._we_wk_ls_},setSessionCookie:function(F,G){var D={referrer:a.referrer,isFirstTime:this.isFirstTimeUser(),sst:(new Date()).getTime(),pvc:0,suid:(new Date().getTime()),landingPage:d.location.href};var E=F||{};E=this.copy(E,D,false);var H=this.stringify(E);x._we_wk_ss_=E;var C=this.setCookie("_we_wk_ss_",H,"","/","","");if(this.isSupportsLocalStorage()){if(C==="ls"){this.setCookie("_we_wk_ss_lsf_",true,"","/","","",true)}else{this.setCookie("_we_wk_ss_lsf_",false,"","/","","",true)}}if(typeof G==="boolean"&&true){this.updateTSC()}return E},getSessionCookie:function(){var F=this.getCookie("_we_wk_ss_")||this.getCookie("_we_wk_ss_",true)||x._we_wk_ss_;if(F){try{if(this.isSupportsLocalStorage()){var E=this.getCookie("_we_wk_ss_lsf_",true);if(!E||E==="false"){var C=this.getCookie("_we_wk_ss_",true);if(C){this.setCookie("_we_wk_ss_",F,-1,"/","","",true);this.setSessionCookie(C)}else{throw new Error()}}}x._we_wk_ss_=(new Function("return "+F)())||null}catch(D){x._we_wk_ss_=this.setSessionCookie(null,true)}}else{x._we_wk_ss_=this.setSessionCookie(null,true)}return x._we_wk_ss_},updateSessionCookie:function(D){var C=this.getSessionCookie();if(C){this.copy(C,(D||{}));this.setSessionCookie(C)}else{C=this.setSessionCookie(null,true)}return C},updateTSC:function(){var C=this.getWebengageCookie();C.sc=C.sc||0;C.sc++;return this.setWebengageCookie(C)},updateTPVC:function(){var C=this.getWebengageCookie();C.tpvc=C.tpvc||0;C.tpvc++;return this.setWebengageCookie(C)},setLST:function(){var C=this.getWebengageCookie();C.lst=(new Date()).getTime();return this.setWebengageCookie(C)},setGZIPFlag:function(D){var C=this.getWebengageCookie();C.isGzip=D||false;return this.setWebengageCookie(C)},setVTD:function(){var C=this.getSessionCookie();C.vtd=1;return this.updateSessionCookie(C)},updateSessionCookieGeoData:function(){var C={country:c.GEO.country(),region:c.GEO.region(),city:c.GEO.city(),ip:c.GEO.ip(),tsD:(c.GEO.serverTimeStamp()&&!isNaN(c.GEO.serverTimeStamp())?((new Date()).getTime()-parseInt(c.GEO.serverTimeStamp(),10)):0)};return this.updateSessionCookie(C)},getClientPageUrl:function(){return d.location.href},getClientPageHost:function(){return d.location.host},escapeScopeChars:function(C){return(C+"").replace(/([,#[\]\\])/g,"$1")},escapeForRegExp:function(C){return(C+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},isFirstTimeUser:function(){return(this.firstTimeUser!==e)?this.firstTimeUser:false},escapeNewLine:function(C){return C.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\/]/g,"\\/").replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t")},stringify:function(H){if(typeof JSON!=="undefined"&&typeof JSON.stringify==="function"){return JSON.stringify(H)}else{var F=typeof(H);if(F!=="undefined"){if(F!="object"||H===null){if(F=="string"){H='"'+this.escapeNewLine(H)+'"'}return String(H)}else{var E=[],C=(H&&H.constructor==Array),G=(H&&H instanceof Date);if(C){for(var D=0;D<H.length;D++){var I=this.stringify(H[D]);if(typeof I!=="undefined"){E.push(I)}}}else{if(G){return G.toString()}else{for(var J in H){var I=this.stringify(H[J]);if(typeof I!=="undefined"){E.push('"'+J+'":'+I)}}}}return(C?"[":"{")+String(E)+(C?"]":"}")}}}},trimStr:function(C){if(typeof C.trim==="function"){return C.trim()}else{if(typeof C==="string"){return C.replace(/^\s+|\s+$/g,"")}}return C},clientDataString:function(I){var F=function(L){var J=L;if(typeof L==="function"){try{J=L()}catch(K){J=null}}return J};if(typeof I==="object"){for(var E in I){var G=I[E];if(G===e||(typeof G!=="boolean"&&G!==0&&!G)){delete I[E];continue}if(!(G instanceof Array)){I[E]=new Array();var H=F(G);if(H===e||(typeof H!=="boolean"&&H!==0&&!H)){delete I[E]}else{I[E].push(H)}}else{var C=[];for(var D=0;D<G.length;D++){G[D]=F(G[D]);if(!(G[D]===e||(typeof G[D]!=="boolean"&&G[D]!==0&&!G[D]))){C.push(G[D])}}if(C.length>0){I[E]=C}else{delete I[E]}}}}return c.util.stringify(I)},isColorTooLight:function(D){D=D.indexOf("#")===0?D.substr(1,D.length):D;var F=parseInt(D.substr(0,2),16);var E=parseInt(D.substr(2,2),16);var C=parseInt(D.substr(4,2),16);var G=((F*299)+(E*299)+(C*299))/1000;return G>=128},isEmptyObject:function(C){for(var D in C){if(C.hasOwnProperty(D)){return false}}return true},parseJSON:function(C){return new Function("return "+C+";")()},bind:function(H,F){var I=this;var G=I.callbacks||{};if(H!==e&&typeof(F)==="function"){var J=F;F=function(){return J.apply(this,arguments)};F.cbid=(J.cbid=I.cbid++);H=(H||"").match(/\S+/g)||[""];var E=H.length;while(E--){var D=H[E];var C=G[D]||{};C[F.cbid]=F;G[D]=C}I.callbacks=G}return I},unbind:function(C,D){var E=this;if(C!==e){if(typeof(E.callbacks)==="object"&&typeof(E.callbacks[C])==="object"){if(typeof(D)==="function"&&D.cbid){delete E.callbacks[C][D.cbid]}else{delete E.callbacks[C]}}}return E},executeCallbacks:function(){var G=this;if(typeof G.enableCallbacks==="boolean"&&G.enableCallbacks){var D=arguments[0];if(D!==e&&typeof G.callbacks==="object"&&typeof G.callbacks[D]==="object"){for(var E in G.callbacks[D]){if(typeof G.callbacks[D][E]==="function"){var C={};if(arguments[1]!==e){C=arguments[1]}C.event=D;var F=G.callbacks[D][E].apply(this,[C]);if(typeof F==="boolean"&&!F){return false}}}}}},markSurveyAsClosed:function(E,D){if(E){try{var C=c.util.getSessionCookie();if(C.closedSurveys===e||!C.closedSurveys){C.closedSurveys=""}if(C.closedSurveys.indexOf("##"+E)<0){C.closedSurveys+="##"+E}c.util.updateSessionCookie(C);if(D&&typeof D.dump==="function"){D.dump("close")}}catch(F){}}},markSurveyAsTaken:function(F,E,D){if(F){try{var H=true;var C=c.util.getWebengageCookie();if(C.takenSurveys===e||!C.takenSurveys){C.takenSurveys=""}if(C.takenSurveys.indexOf("##"+F)<0){C.takenSurveys+="##"+F;H=false}c.util.setWebengageCookie(C);if(E&&typeof E.dump==="function"&&D&&typeof D==="boolean"&&D){E.event=E.event||"submit";if(E.event==="submit"&&!H){E.dump(E.event)}else{if(E.event==="complete"){E.dump(E.event)}}}}catch(G){}}},markEntityAsShown:function(I,E,J){if(I&&E){var C=1,F=1;try{var G=c.util.getWebengageCookie(),M=c.util.getSessionCookie(),L=("notification"===E?"seenNIds":("survey"===E?"seenSIds":null)),D=("notification"===E?"snids":("survey"===E?"ssids":null));if(L&&D){G[L]=G[L]&&G[L]!==e?G[L]:"";if(G[L].indexOf("##"+I)<0){G[L]+="##"+I+"="+C}else{var K=new RegExp("##"+I+"=(\\d+)","g");G[L]=G[L].replace(K,function(N,O){C=(+O+1);return"##"+I+"="+C})}M[D]=M[D]&&M[D]!==e?M[D]:"";if(M[D].indexOf("##"+I)<0){M[D]+="##"+I+"="+F}else{var K=new RegExp("##"+I+"=(\\d+)","g");M[D]=M[D].replace(K,function(N,O){F=(+O+1);return"##"+I+"="+F})}c.util.updateSessionCookie(M);c.util.setWebengageCookie(G);if(J&&typeof J.dump==="function"){J.dump("view")}}}catch(H){}}},markNotificationAsClicked:function(G,H,E){if(G){try{var D=c.util.getWebengageCookie(),C=c.util.getSessionCookie();D.takenNIds=D.takenNIds&&D.takenNIds!==e?D.takenNIds:"";if(D.takenNIds.indexOf("##"+G)<0){D.takenNIds+="##"+G}c.util.setWebengageCookie(D);if(E&&typeof E.dump==="function"){E.dump("click")}}catch(F){}}},markNotificationAsClosed:function(F,D){if(F){try{var C=c.util.getSessionCookie();if(C.closedNIds===e||!C.closedNIds){C.closedNIds=""}if(C.closedNIds.indexOf("##"+F)<0){C.closedNIds+="##"+F}c.util.updateSessionCookie(C);if(D&&typeof D.dump==="function"){D.dump("close")}}catch(E){}}},setMinimizedState:function(C,E,G){var F=(C==="notification"?"minNIds":"minSIds");if(E){try{var D=c.util.getSessionCookie();if(D[F]===e||!D[F]){D[F]=""}if(G){if(D[F].indexOf("##"+E)<0){D[F]+="##"+E}}else{D[F]=D[F].replace("##"+E,"")}c.util.updateSessionCookie(D)}catch(H){}}},getMinimizedState:function(C,E){var F=(C==="notification"?"minNIds":"minSIds");var G=false;if(E){try{var D=c.util.getSessionCookie();if(D[F]!==e){if(0<=D[F].indexOf("##"+E)){G=true}}}catch(H){}}return G},getVersion:function(){return s.widgetVersion},usckwl:function(E){var D=c.util.getSessionCookie();D.pvc=(D.pvc?D.pvc+1:1);if(E&&a.referrer&&(!D.referrer||D.referrer!==a.referrer)){var C=a.referrer.match(/:\/\/(.[^\/]+)/)[1];if(!C.match(new RegExp(c.util.escapeForRegExp(E)+"$","gi"))){D.referrer=a.referrer}}c.util.updateSessionCookie(D)},getHashCode:function(G){var E=0,D,C,F=G||"";if(F.length==0){return E}for(D=0,l=F.length;D<l;D++){C=F.charCodeAt(D);E=((E<<5)-E)+C;E|=0}return E},getTotalTimesShown:function(I,E,D){var C=0;if(I&&E){var K=null,G=null;if(D){K=u.getSessionCookie();G=("notification"===E?"snids":("survey"===E?"ssids":null))}else{K=u.getWebengageCookie();G=("notification"===E?"seenNIds":("survey"===E?"seenSIds":null))}if(K&&G&&K[G]){try{var J=new RegExp("##"+I+"=(\\d+)");var F=K[G].match(J);if(F instanceof Array&&F.length>1){C=parseInt(F[1],10)}}catch(H){}}}return C},attachEventListners:function(F,C){var D=(F==="survey"?c.survey.callbacks:(F==="feedback"?c.feedback.callbacks:c.notification.callbacks));if(typeof D!==e&&D){for(eventName in D){var E=D[eventName];if(typeof callbacks!=e&&E){for(_cbid in E){this.bind.apply(C,[eventName,E[_cbid]])}}}}},hasSVG:function(){return !!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},onDocReady:function(C){if(typeof C==="function"){if(a.body){c.withELog(function(){C()});return}if(a.addEventListener){a.addEventListener("DOMContentLoaded",function(){c.withELog(function(){a.removeEventListener("DOMContentLoaded",arguments.callee,false);C()})},false)}else{if(a.attachEvent){a.attachEvent("onreadystatechange",function(){c.withELog(function(){if(a.readyState==="complete"){a.detachEvent("onreadystatechange",arguments.callee);C()}})});if(a.documentElement.doScroll&&d==d.top){(function(){c.withELog(function(){try{a.documentElement.doScroll("left")}catch(D){setTimeout(arguments.callee,0);return}C()})})()}}}}},abortAllInstances:function(C){c.withELog(function(){if(C.length>0){for(var D=0;D<C.length;D++){if(typeof C[D].abort==="function"){C[D].abort()}}}})},abortInstance:function(C){c.withELog(function(){if(C){if(typeof C.close==="function"){C.close()}else{C.onLoad(function(){this.close()})}}})},uwats:function(){if(!f["webengage.isDemoMode"]){if(Math.floor((Math.random()*100)+1)<=10){var C=1000*60*60*24;var E=new Date().getTime()-(7*C);if(webengage_fs_configurationMap.lastWidgetCheckDate){var D=new Date(webengage_fs_configurationMap.lastWidgetCheckDate);if(D<E){c.eLog(null,"info",D.getTime(),"widget-verified")}}else{c.eLog(null,"info","no-check-date","widget-verified")}}}},isSmallScreen:function(){var C=480,D=d.screen.availWidth;return(D<=C?true:false)},webklitWorkAround:function(C){var D=a.body.scrollTop||0;if(a.location.toString().match(/#(top)?$/)){C.body.scrollTop=0;a.body.scrollTop=D}},getWeDataContainer:function(){return s.weDataContainer},withWeJquery:function(C){c.jQSt=c.jQSt||0;switch(c.jQSt){case 1:setTimeout(function(){c.util.withWeJquery(C)},100);break;case 2:if(typeof C==="function"){C()}break;default:c.jQSt=1;c.util.loadScript.apply(s.widgetContainer,[s.weJquery,function(){$weJQuery=jQuery.noConflict(true);c.jQSt=2;if(typeof C==="function"){C()}}]);break}},tsTracking:function(D,E){if(D){var C=new Image();C.src="//"+s.tstbu+D+(E?"?"+E:"")}}}},true);n(c,{getWidgetVersion:function(){return f["webengage.widgetVersion"]||"4.0"}},true);var u=c.util;var s={widgetVersion:"4",weJquery:"//d3701cc9l7v9a6.cloudfront.net/js/jquery/jquery-1.3.2.min.js",baseWebEngageUrl:"//webengage.com",feedbackAppHost:"feedback.webengage.com",surveyAppHost:"survey.webengage.com",widgetDomain:"//d3701cc9l7v9a6.cloudfront.net",baseStaticUrl:"//d3701cc9l7v9a6.cloudfront.net",loadSurveyWidgetUrl:function(C){return"/js/widget/we-survey-widget-"+(C?C:"~483819f")+"-v-4.0.js?v=335.0"},loadSurveyWidgetUrlv3:"/js/widget/we-survey-widget.js?v=335.0",notificationWidgetScriptUrl:"/js/widget/we-notification-widget-v-4.1.js?v=335.0",findAllTakenSurveysUrl:function(){return"//survey.webengage.com/publisher-widget-loader.html?action=findAllTakenSurveys&licenseCode="+f["webengage.licenseCode"]+"&url="+encodeURIComponent(u.getClientPageUrl())},widgetContainerId:"webklipper-publisher-widget-container",feedbackImageBaseUrl:"//s3-ap-southeast-1.amazonaws.com/wk-static-files/webengage/feedbacktab/",loadFeedbackWidgetUrl:"/js/widget/we-feedback-widget-v-4.0.js?v=335.0",loadFeedbackWidgetUrlv3:"/js/widget/we-feedback-widget.js?v=335.0",gaCallbacksScriptUrl:"//d3701cc9l7v9a6.cloudfront.net/js/widget/ga-callbacks-helper.js?v=335.0",tstbu:"c.webengage.com",csUrl:"//d3701cc9l7v9a6.cloudfront.net/js/widget/we-conversion-helper-min-v-1.0.js?v=335.0"};var A={};u.extend("logger",(function(){var D={containerCss:{position:function(){return c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed"},cursor:"default",margin:0,zIndex:(u.getMaxZIndex()+1),backgroundColor:"red",right:"0px",bottom:"0px",display:"block",padding:"10px",maxWidth:"500px",textAlign:"left",lineHeight:"17px",background:"none repeat scroll 0 0 #ff9",border:"1px solid #fc6",borderBottomWidth:"0px",borderRightWidth:"0px",borderTopLeftRadius:"5px",MozBorderRadiusTopleft:"5px",WebkitBorderTopLeftRadius:"5px",boxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",MozBoxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",WebkitBoxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",fontFamily:"Arial, sans-serif",fontSize:"13px"},dataDivCss:{margin:"0px",padding:"0px",color:"#000",textShadow:"1px 1px #f1f1f1",textDecoration:"none",fontFamily:"inherit",fontSize:"inherit"},dataDivLinkCss:{color:"#039",textDecoration:"underline",textShadow:"1px 1px #f1f1f1",fontFamily:"inherit",fontSize:"inherit"},closeButtonCss:{color:"#039",textDecoration:"underline",textShadow:"1px 1px #f1f1f1",cursor:"pointer",cssFloat:"right",styleFloat:"right",marginRight:"5px",marginLeft:"30px"}},C=function(O,N){var G=a.getElementById("webengage-error-messages");if(G){G.parentNode.removeChild(G)}var I=a.createElement("div");I.setAttribute("id","webengage-error-messages");I=u.applyCss(I,D.containerCss);a.body.insertBefore(I,null);var M=a.createElement("div");M=u.applyCss(M,D.closeButtonCss);M.innerHTML="x";I.appendChild(M);M.onclick=function(){this.parentNode.parentNode.removeChild(this.parentNode)};var F=a.createElement("div");F=u.applyCss(F,D.dataDivCss);I.appendChild(F);F.innerHTML=O;var J=F.getElementsByTagName("a");if(J&&J.length>0){for(var K=0;K<J.length;K++){u.applyCss(J[K],D.dataDivLinkCss);var H=J[K].getAttribute("href");var E=H.split("#");var L=E[0];L=L.indexOf("?")<0?(L+"?"):L;L=L+"&ref=widget-message";L=E.length==2?(L+"#"+E[1]):L;J[K].setAttribute("href",L)}}c.eLog(null,N,O,O);setTimeout(function(){I.remove()},5000);return I};return{success:function(E){return C(E,"success")},warn:function(E){return C(E,"warn")},error:function(E){return C(E,"error")}}})());u.extend("GEO",{country:function(){return this._country||""},country_code:function(){return this._country_code||""},region:function(){return this._region||""},city:function(){return this._city||""},latitude:function(){return this._latitude||""},longitude:function(){return this._longitude||""},serverTimeStamp:function(){return this._serverTimeStamp},ip:function(){return this._ip||""},setGeoData:function(E){var D=this,C=E||{};D._country=C.geoplugin_countryName||"";D._country_code=C.geoplugin_country_code||"";D._region=C.geoplugin_region||"";D._city=C.geoplugin_city||"";D._latitude=C.geoplugin_latitude||"";D._longitude=C.geoplugin_longitude||"";D._serverTimeStamp=C.serverTimeStamp;D._ip=C.clientIp;c.getUser().country=D._country;c.getUser().city=D._city;c.getUser().ip=D._ip},isGeoLoaded:function(){return this._isLoaded?this._isLoaded:u.getSessionCookie().tsD?true:false},load:function(F,C){var D=this;if(!this.isGeoLoaded()){var E="//geoservice.webengage.com/geoip/?jsoncallback="+encodeURI("webengage.GEO.setGeoData");u.loadScript.apply(s.widgetContainer,[E,function(){u.updateSessionCookieGeoData();D._isLoaded=true;if(typeof F==="function"){F()}},null,function(){if(typeof C==="function"){C()}}])}else{D._isLoaded=true;if(typeof F==="function"){F()}}}});u.extend("BrowserDetect",(function(){var F,H,D,J=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:d.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Windows,Trident",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],G=[{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"Windows Phone",identity:"Windows Phone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"Mobile",identity:"Mobile"}],E=[{string:navigator.userAgent,subString:"iPhone",identity:"Mobile"},{string:navigator.userAgent,subString:"iPod",identity:"Mobile"},{string:navigator.userAgent,subString:"Android,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"Windows Phone",identity:"Mobile"},{string:navigator.userAgent,subString:"BlackBerry,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"BB10,Mobile",identity:"Mobile"},{string:navigator.userAgent,subString:"Android",identity:"Tablet"},{string:navigator.userAgent,subString:"iPad",identity:"Tablet"},{string:navigator.userAgent,subString:"Windows,Tablet",identity:"Tablet"}],C=function(R){for(var N=0;N<R.length;N++){var O=R[N].string;var Q=R[N].prop;this._versionSearchString=R[N].versionSearch||R[N].identity;if(O){var P=R[N].subString.split(",");var M=false;for(var L=0;L<P.length;L++){if(O.indexOf(P[L])==-1){M=false;break}M=true}if(M){return R[N].identity}}else{if(Q){return R[N].identity}}}},I=function(N){var M=N.indexOf(this._versionSearchString);if(M==-1){return}var L=parseFloat(N.substring(M+this._versionSearchString.length+1));if(F=="Explorer"&&7<=L){if(N.indexOf("Trident/4")!=-1){L=8}else{if(N.indexOf("Trident/5")!=-1){L=9}else{if(N.indexOf("Trident/6")!=-1){L=10}}}}return L},K=function(){if(F&&H&&D){return}F=C(J)||"An unknown browser";H=I(navigator.userAgent)||I(navigator.appVersion)||"an unknown version";D=C(G)||"an unknown OS";_device=C(E)||(u.isSmallScreen()?"Mobile":"Desktop")};return{browser:function(){return K()||F},version:function(){return K()||H},os:function(){return K()||D},device:function(){return K()||_device},is_this_the_worlds_most_annoying_browser:function(){return(typeof a.all!=="undefined"&&!d.opera&&!d.XMLHttpRequest)},ie:function(){return K()||F=="Explorer"},isMobile:function(){var N=this.os(),L=false,O=["iOS","Android","Windows Phone","Mobile"];for(var M=0;M<O.length;M++){if(N==O[M]){L=true;break}}return L}}})());var y={onRun:function(C){return this.bind("run",C)},onLoad:function(C){return this.bind("load",C)},onOpen:function(C){return this.bind("open",C)},onView:function(C){return this.bind("view",C)},onSubmit:function(C){return this.bind("submit",C)},onClick:function(C){return this.bind("click",C)},onComplete:function(C){return this.bind("complete",C)},onClose:function(C){return this.bind("close",C)},bind:function(){return u.bind.apply(this,arguments)},unbind:function(){return u.unbind.apply(this,arguments)},executeCallbacks:function(){return u.executeCallbacks.apply(this,arguments)}};u.extend("",(function(){var C=function(){var G={wv:u.getVersion(),licenseCode:m,tzo:(A.configurationMap.tzo||0)};var F=u.getWebengageCookie();G.luid=F.luid;G.ust=F.time;G.lst=F.lst;G.sc=F.sc;G.tpvc=F.tpvc;var E=u.getSessionCookie();G.ref=E.referrer;G.sst=E.sst;G.pvcs=E.pvc;G.suid=E.suid;G.lp=E.landingPage;G.pageTitle=a.title;G.pageURL=d.location.href;G.viewportHeight=u.getWindowHeight();G.viewportWidth=u.getWindowWidth();G.ver=1;return G},D=function(H,J,I){var F="//c.webengage.com"+H;try{var N=d.XMLHttpRequest;if(typeof N==="undefined"){N=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(S){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(S){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(S){}throw new Error("This browser does not support XMLHttpRequest.")}}var O=new N();var E=J?"POST":"GET";O.open(E,F,true);O.onreadystatechange=function(){if(O.readyState==4){if(O.status==200){if(I&&typeof I==="function"){I()}}}};O.setRequestHeader("Content-type","application/x-www-form-urlencoded");var Q=Object.keys(J).map(function(S){return encodeURIComponent(S)+"="+encodeURIComponent(J[S])}).join("&");O.send(Q)}catch(M){try{var L=a.createElement("iframe");var K="WE_XHR_POST_IFRM";a.body.appendChild(L);L.style.display="none";L.contentWindow.name=K;var G=a.createElement("form");G.target=K;G.action=F;G.method="POST";for(var R in J){var P=a.createElement("input");P.type="hidden";P.name=R;P.value=J[R];G.appendChild(P)}a.body.appendChild(G);G.submit();L.onload=function(){if(L.parentNode){L.parentNode.removeChild(L)}}}catch(M){}}};return{dump:function(H,G,I){H=H||"unknown";var F=C();F=u.copy(F,(I||{}),true);F.we_category=(H||"unknown");F.we_event=(G||"unknown");var E=u.stringify(F);E=c.LZString.compressToBase64(E);D("/l.jpg",{data:E})}}})());u.extend("feedback",(function(){var C=[];return{cbid:1,getMobileLoadingDiv:function(E){var D=a.createElement("div");D.id=E||s.widgetContainerId+"-loading";D=c.util.applyCss(D,{position:"fixed",left:(c.util.getWindowWidth()*0.05)+"px",width:(c.util.getWindowWidth()*0.9)+"px",opacity:"1",background:"#f9f9f9",color:"#666","z-index":c.util.getMaxZIndex(),textAlign:"center","padding-top":"20px","padding-bottom":"20px",fontFamily:"Arial, sans-serif",fontSize:"10px",display:"none"});return D},getLoadingDiv:function(E){var D=a.createElement("div");D.id=E||s.widgetContainerId+"-loading";D=c.util.applyCss(D,{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#666",textDecoration:"none",position:"absolute",textAlign:"center"});return D},getLightBoxBaseDiv:function(){var D=a.createElement("div");c.util.applyCss(D,{display:"block",margin:"0",padding:"0","z-index":c.util.getMaxZIndex(),position:"absolute",overflow:"hidden",top:"0",left:"0",height:a.body.scrollHeight+"px",width:"100%","background-color":"rgba(0, 0, 0, .85)"});D.id=s.widgetContainerId+"-base";return D},getLightBoxContainerDiv:function(){var E=a.createElement("div");c.util.applyCss(E,{display:"block",top:"0",left:"0",width:"100%",height:c.util.getWindowHeight()+"px",position:"absolute",outline:"none !important","-webkit-backface-visibility":"hidden",margin:"0",padding:"0","z-index":c.util.getMaxZIndex(),"-webkit-overflow-scrolling":"touch"});E.setAttribute("tabIndex",-1);E.id=s.widgetContainerId+"-light-box-container";var D=a.createElement("div");c.util.applyCss(D,{display:"block","text-align":"center",position:"absolute",width:"100%",height:"100%",left:"0",top:"0",outline:"none !important","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box",padding:"0 8px",margin:"0","overflow-y":"auto","overflow-x":"hidden"});D.id=s.widgetContainerId+"-light-box-content";E.appendChild(D);return E},render:function(D){return c.withELog(function(){return(new function(){c.feedback.clear();var Q=this;Q.cbid=1;C[C.length]=Q;Q.abort=function(){u.abortInstance(this)};Q._feedbackOptions={launchType:f["webengage.feedback.launchType"]||"",externalLinkId:f["webengage.feedback.externalLinkId"]||"",alignment:f["webengage.feedback.alignment"]||"",borderColor:f["webengage.feedback.borderColor"]||"",backgroundColor:f["webengage.feedback.backgroundColor"]||"",snapshotEnabled:f["webengage.feedback.snapshotEnabled"]||"",defaultCategory:f["webengage.feedback.defaultCategory"]||"",showAllCategories:(typeof f["webengage.feedback.showAllCategories"]==="boolean"&&!f["webengage.feedback.showAllCategories"])?false:true,showForm:f["webengage.feedback.showForm"]||false,isDemoMode:f["webengage.feedback.isDemoMode"]||f["webengage.isDemoMode"]||false,customData:f["webengage.feedback.customData"]||f["webengage.customData"]||{},formData:f["webengage.feedback.formData"]||f["webengage.formData"]||[],enableCallbacks:f["webengage.feedback.enableCallbacks"]||f["webengage.enableCallbacks"]||false,language:f["webengage.language"]||""};if(D!==e&&D.data!==e&&D.data){var af=D.data;if(af.name!==e&&af.name){Q._feedbackOptions.formData.push({name:"name",value:af.name})}if(af.email!==e&&af.email){Q._feedbackOptions.formData.push({name:"email",value:af.email})}if(af.category!==e&&af.category){Q._feedbackOptions.formData.push({name:"category",value:af.category})}}var I={feedbackLaunchType:"launchType",feedbackExternalLinkId:"externalLinkId",feedbackButtonAlignment:"alignment",feedbackButtonBorderColor:"borderColor",feedbackButtonBackgroundColor:"backgroundColor",defaultFeedbackCategory:"defaultCategory",showAllFeedbackCategories:"showAllCategories",showFeedbackForm:"showForm",data:"customData",demo:"isDemoMode"};if(D!==e&&!u.isEmptyObject(D)){for(var E in D){var ac=I[E];if(ac!==e&&ac){D[ac]=D[E];delete D[E]}}}Q._feedbackOptions=u.copy(Q._feedbackOptions,(D?D:{}),true);Q.enableCallbacks=(typeof Q._feedbackOptions.enableCallbacks==="boolean"?Q._feedbackOptions.enableCallbacks:false);u.copy(Q,y,true);Q.onLoad((Q._feedbackOptions.onLoad||f["webengage.feedback.onLoad"]));Q.onSubmit((Q._feedbackOptions.onSubmit||f["webengage.feedback.onSubmit"]));Q.onClose((Q._feedbackOptions.onClose||f["webengage.feedback.onClose"]));Q.onOpen((Q._feedbackOptions.onOpen||f["webengage.feedback.onOpen"]));u.attachEventListners("feedback",Q);if(A.feedback&&(A.feedback.isEnabled||Q._feedbackOptions.isDemoMode)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&A.sslEnabled))&&!A.isFQuotaOver){var R=A.feedback.config,Y={alignment:["right","left"],launchTypes:["feedbackButton","externalLink"],containerCss:{margin:0,padding:0,position:(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed"),border:"5px solid #ccc",backgroundColor:"#f9f9f9",borderWidth:"1px",borderStyle:"solid"},containerRightCss:{right:"0px",borderRightWidth:"0px"},containerLeftCss:{left:"0px",borderLeftWidth:"0px"},commonCss:{margin:0,padding:0,cursor:"pointer",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundPosition:"center 0",display:"block",paddingBottom:"7px",paddingLeft:"3px",paddingRight:"3px",paddingTop:"7px"},tabCssWithIcon:{backgroundPosition:"center bottom",paddingBottom:"33px"},closeCommonCss:{height:"22px",width:"22px",cursor:"pointer",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",position:"absolute",top:"-14px",backgroundImage:"url('"+s.baseStaticUrl+"/images/icons/feedback-widget-close.png')",backgroundColor:"transparent",display:"none"},leftCloseCss:{right:"-14px"},rightCloseCss:{left:"-14px"},feedbackBgImageForDarkBackground:s.baseStaticUrl+"/images/webengage/icons/feedback-tab-bg-dark.png",feedbackBgImageForLightBackground:s.baseStaticUrl+"/images/webengage/icons/feedback-tab-bg-light.png",feedbackTextImage:s.feedbackImageBaseUrl+R.imgPath,sizeCss:{height:R.imgHeight+"px",width:R.imgWidth+"px"},leftCss:{cssFloat:"right",styleFloat:"right"},rightCss:{cssFloat:"left",styleFloat:"left"},loadingCss:{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#666",textDecoration:"none",position:"absolute",textAlign:"center"},maxWidth:"450px",maxHeight:(c.BrowserDetect.ie()?"349px":"345px")},aa={getButtonCssBasedOnConfig:function(ah,ai){var ag={};ag=u.copy(ag,Y.sizeCss);if(ah=="left"){ag=u.copy(ag,Y.leftCss)}else{ag=u.copy(ag,Y.rightCss)}if(ai){ag=u.copy(ag,Y.tabCssWithIcon)}return ag},getContainerCssBasedOnConfig:function(ah){var ag={};ag=u.copy(ag,Y.containerCss);if(ah=="right"){ag=u.copy(ag,Y.containerRightCss)}else{ag=u.copy(ag,Y.containerLeftCss)}return ag},getCloseCssBasedOnConfig:function(ah){var ag={};if(ah=="right"){ag=u.copy(ag,Y.rightCloseCss)}else{ag=u.copy(ag,Y.leftCloseCss)}return ag},getButtonCssBasedOnBackgroundColor:function(ah){var ag={};if(u.isColorTooLight(ah)){ag=u.copy(ag,{backgroundImage:("url('"+Y.feedbackBgImageForLightBackground+"')")})}else{ag=u.copy(ag,{backgroundImage:("url('"+Y.feedbackBgImageForDarkBackground+"')")})}return ag},getCustomTextImageCss:function(){var ag={};ag=u.copy(ag,{backgroundImage:("url('"+Y.feedbackTextImage+"')")});return ag}},X=(R.closeImg===e||R.closeImg===null||R.closeImg==="")?(s.baseStaticUrl+"/images/icons/feedback-widget-close.png"):("//s3-ap-southeast-1.amazonaws.com/"+R.closeImg),W=u.getInitParamValue(Q._feedbackOptions,"alignment",R.alignment,Y.alignment),K=u.getInitParamValueAsArray(Q._feedbackOptions,"launchType",R.launchType,Y.launchTypes),J=u.getInitParamValueAsArray(Q._feedbackOptions,"externalLinkId",R.externalLinkId),O=u.getInitParamValue(Q._feedbackOptions,"backgroundColor",R.backgroundColor),ad=u.getInitParamValue(Q._feedbackOptions,"borderColor",R.borderColor),Z=u.getInitParamValue(Q._feedbackOptions,"snapshotEnabled",((R.snapshotEnabled===e)?true:R.snapshotEnabled)),ab=u.inArray(K,Y.launchTypes[0]),S=R.imgWidth,M=R.imgHeight,P=R.showWeIcon;O=O.indexOf("#")===0?O:("#"+O);ad=ad.indexOf("#")===0?ad:("#"+ad);var U=a.createElement("div");s.widgetContainer.appendChild(U);U.setAttribute("id",s.widgetContainerId+"-content");var ae=U.style;U=u.applyCss(U,Y.containerCss);U=u.applyCss(U,aa.getContainerCssBasedOnConfig(W));U.style.width=(parseInt(S)+3+3)+"px";var G=(parseInt(M)+7+7+(P?(3+26):0))+"px";ae.borderColor=ad;ae.top=(("innerHeight" in d?d.innerHeight:a.documentElement.clientHeight)-parseInt(M))/2+"px";ae.zIndex=(u.getMaxZIndex()+1);var N=a.createElement("div");U.appendChild(N);N.id=s.widgetContainerId+"-close-div";N=u.applyCss(N,Y.closeCommonCss);N=u.applyCss(N,aa.getCloseCssBasedOnConfig(W));N.style.backgroundImage="url('"+X+"')";if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){N.style.backgroundImage="";N.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+X+"')"}var V=a.createElement("div");U.appendChild(V);V.setAttribute("id",s.widgetContainerId+"-content-expand-collapse");var T=V.style;V=u.applyCss(V,Y.commonCss);V=u.applyCss(V,aa.getButtonCssBasedOnConfig(W,P));V=u.applyCss(V,aa.getButtonCssBasedOnBackgroundColor(O));if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){T.backgroundImage="";var F=(u.isColorTooLight(O)?Y.feedbackBgImageForLightBackground:Y.feedbackBgImageForDarkBackground);T.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+F+"')"}T.backgroundColor=O;T.zIndex=u.getMaxZIndex()+1;if(!ab){U.style.display="none"}var L=a.createElement("div");V.appendChild(L);L.style.width=parseInt(S)+"px";L.style.height=parseInt(M)+"px";L.style.margin="0px";L.style.padding="0px";L=u.applyCss(L,aa.getCustomTextImageCss());if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){L.style.backgroundImage="";T.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+Y.feedbackTextImage+"')"}N.style.zIndex=u.getMaxZIndex()+1;Q.close=function(){try{U.removeChild(a.getElementById(s.widgetContainerId+"-loading"))}catch(ag){}try{U.removeChild(a.getElementById(s.widgetContainerId+"-content"))}catch(ag){}try{a.getElementById(s.widgetContainerId+"-content-expand-collapse").isCurrentlyOpen=false}catch(ag){}N.style.display="none";U.style.width=(parseInt(S)+3+3)+"px";if(!ab){V.style.display="none"}};N.onclick=function(){c.withELog(function(){Q.close()})};function H(){if(f["webengage.feedback.custom"]){U.style.display="block";U.style.border="none";U.style["background-color"]="transparent";U.style.position="static";U.style.overflow="visible";U.style.width="0px";U.style.height="0px"}else{if(R.mobileLB&&(c.BrowserDetect.isMobile()||u.isSmallScreen())){U.style.display="block";var aj=c.feedback.getLightBoxBaseDiv();s.weDataContainer.appendChild(aj);var ai=c.feedback.getLightBoxContainerDiv();s.weDataContainer.appendChild(ai);var ah=c.feedback.getMobileLoadingDiv();ah.innerHTML="Loading<br/>please wait ...";s.weDataContainer.appendChild(ah);var ak=c.util.getElementHeight(ah);var al=c.util.getWindowHeight();ah.style.top=(al-ak)/2+"px";ah.style.display="block"}else{U.style.display="block";U.style.width="300px";var ah=c.feedback.getLoadingDiv();ah=u.applyCss(ah,Y.loadingCss);ah.innerHTML="Loading<br/>please wait ...";U.appendChild(ah);u.alignCenter(ah,U,W);N.style.display="block"}}Q.feedbackLoadStartTime=new Date();var ag=s.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?s.loadFeedbackWidgetUrlv3:s.loadFeedbackWidgetUrl);c.feedbackLoadStartTime=new Date();u.withWeJquery(function(){var am=a.createElement("script");am.type="text/javascript";am.src=ag;s.widgetContainer.appendChild(am)})}V.onclick=function(){c.withELog(function(){H()})};if(J&&J.length>0){(function(){for(var ah=0;ah<J.length;ah++){var ai=J[ah];var ag=a.getElementById(ai);if(ag){ag.onclick=function(aj){var ak=aj||d.event;ak.cancelBubble=true;if(ak.stopPropagation){ak.stopPropagation()}if(ak.preventDefault){ak.preventDefault()}else{ak.returnValue=false}V.onclick();return false}}}})()}a.$FeedbackWidgetInitializer={containerId:s.widgetContainerId,licenseCode:m,appHost:s.feedbackAppHost,minWidth:(parseInt(S)+3+3)+"px",maxWidth:Y.maxWidth,minHeight:G,maxHeight:Y.maxHeight,showFeedbackButton:ab,buttonAlignment:W,borderColor:ad.substring(1),snapshotEnabled:Z,currentInstance:Q,mobileLBEnabled:R.mobileLB&&(c.BrowserDetect.isMobile()||u.isSmallScreen()),widgetLanguage:Q._feedbackOptions.language};if(Q._feedbackOptions.showForm==true){V.onclick()}}else{if(A.feedback&&A.feedback.isEnabled&&a.location.protocol=="https:"&&!A.sslEnabled){c.eLog(null,"error","Feedback - Widget turned off for SSL encrypted page","Feedback - Widget turned off for SSL encrypted page")}}})})},clear:function(){c.withELog(function(){try{s.widgetContainer.removeChild(a.getElementById(s.widgetContainerId+"-content"))}catch(D){}C=[];a.$FeedbackWidgetInitializer=null})},abort:function(){u.abortAllInstances(C)},attachEventListner:function(){var D=this,E=arguments;c.withELog(function(){u.bind.apply(D,E);if(C.length>0){for(var F=0;F<C.length;F++){C[F].enableCallbacks=true;u.bind.apply(C[F],E)}}})}}})());u.extend("ruleExecutor.constants",{SEARCH_ENGINE_REGEXP:{google:{pattern:"^(?:http(s)?://)?(www\\.)?google\\..*/.*$",queryParam:"q"},yahoo:{pattern:"^(?:http(s)?://)?(?:([a-z]{2})\\.)?search\\.yahoo\\.com/.*$",queryParam:"p"},bing:{pattern:"^(?:http(s)?://)?((?:www|[a-z]{2})\\.)?bing\\.com/search\\?.*$",queryParam:"q"},ask:{pattern:"^(?:http(s)?://)?www\\.ask\\.com/.*$",queryParam:"q"},baidu:{pattern:"^(?:http(s)?://)?www\\.baidu\\.com/.*$",queryParam:"wd"},yandex:{pattern:"^(?:http(s)?://)?www\\.yandex\\.com/.*$",queryParam:"text"},duckduckgo:{pattern:"^(?:http(s)?://)?www\\.duckduckgo\\.com/.*$",queryParam:"q"}},SOCIAL_MEDIA_REGEX:"^(?:http(s)?://)?(.*.)?(facebook|twitter|t|pinterest)\\.(com|co)/.*$",XPATH_PLUGIN_FILE:"//d3701cc9l7v9a6.cloudfront.net/js/jquery/wgxpath.install.js"});u.extend("ruleExecutor.dependencies",{XPATH:function(D,E,C){c.XPATH.util.loadXPath(E,C)},GEO:function(D,E,C){c.GEO.load(E,C)}});u.extend("XPATH.util",(function(){return{loadXPath:function(E,D){if((c.BrowserDetect.browser()==="Explorer")&&(!a.evaluate)){var C="//d3701cc9l7v9a6.cloudfront.net/js/jquery/wgxpath.install.js";u.loadScript.apply(s.widgetContainer,[C,function(){wgxpath.install();if(typeof E==="function"){E()}},null,function(){if(typeof D==="function"){D()}}])}else{if(typeof E==="function"){E()}}},isXpathLoaded:function(){return(a.evaluate?true:false)},getXPathElement:function(E){var C=null;if(E&&E.indexOf("|")>-1){var D=E.split("|");E=D[0]+"/@"+D[1]}try{xpathResult=a.evaluate(E,a,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null)}catch(F){return C}if(!xpathResult){return C}return xpathResult.singleNodeValue},evaluateXPathQuery:function(D){var C=c.XPATH.util.getXPathElement(D);if(C){return C.textContent}else{return null}}}})());u.extend("ruleExecutor.dependency.util",{xPathExists:function(){if(c.XPATH.util.isXpathLoaded()){return true}else{var C={};C.type="XPATH";throw C}},geoDataExists:function(){if(c.GEO.isGeoLoaded()){return true}else{var C={};C.type="GEO";throw C}}});u.extend("ruleExecutor.util",(function(C){return{isMatches:function(F,D){if(F){if(F instanceof Array){for(var G=0;G<F.length;G++){if(c.ruleExecutor.util.isMatches(F[G],D)){return true}}}else{if(D instanceof Array){for(var E=0;E<D.length;E++){if(F.match(new RegExp(D[E],"mgi"))){return true}}}else{if(F.match(new RegExp(D,"mgi"))){return true}}}}return false},getCurrentTimeInSec:function(G){var F=new Date(G);var D=F.getHours();var H=F.getMinutes();var E=F.getSeconds();return(D*60*60+H*60+E)},getClientTime:function(){var D=u.getCurrentTime();return c.ruleExecutor.util.getCurrentTimeInSec(D)},getClientDayOfWeek:function(){return u.getCurrentWeekDay()},getPublisherTime:function(){var D=u.getCurrentTime(s.publisherTimeZoneOffset);return c.ruleExecutor.util.getCurrentTimeInSec(D)},isContainsSearchTerms:function(F,G){var E=false;if(typeof F!=="function"||!G||!(G instanceof Array)||G.length<=0){return false}var D=F();if(typeof D!==e&&D){for(var H=0;H<G.length;H++){E=c.ruleExecutor.util.isContains(D,c.ruleExecutor.util.jsTokenizer(G[H]," "),"contains_all");if(typeof E==="boolean"&&E){break}}}return E},isContains:function(I,M,E){var L=I;if(typeof(I)==="function"){L=I()}var K=false;var F=E||"contains_any";if(L!==e&&L){var D=[];if(L instanceof Array){for(var J=0;J<L.length;J++){D[L[J].toLowerCase()]=true}}else{D[L]=true}if(M!==e&&M){if(M instanceof Array){if(F=="contains_all"){for(var H=0;H<M.length;H++){if(D[M[H].toLowerCase()]==true){K=true;continue}K=false;break}}else{for(var G=0;G<M.length;G++){if(D[M[G].toLowerCase()]==true){K=true;break}}}}else{K=D[M.toLowerCase()]==true}}}return K},getReferrers:function(){var E=[];if(a.referrer){E[E.length]=a.referrer.toLowerCase()}var D=u.getSessionCookie();if(D&&D.referrer&&(!a.referrer||D.referrer!=a.referrer)){E[E.length]=D.referrer.toLowerCase()}return E},getCountry:function(){if(c.ruleExecutor.dependency.util.geoDataExists()){return u.getSessionCookie().country||null}},getRegion:function(){if(c.ruleExecutor.dependency.util.geoDataExists()){return u.getSessionCookie().region||null}},getCity:function(){if(c.ruleExecutor.dependency.util.geoDataExists()){return u.getSessionCookie().city||null}},getSearchEngineMatchResult:function(){var G=c.ruleExecutor.util.getReferrers();var D={isSER:false};for(var F in C.SEARCH_ENGINE_REGEXP){for(var E=0;E<G.length;E++){if(c.ruleExecutor.util.isMatches(G[E],C.SEARCH_ENGINE_REGEXP[F].pattern)!=false){D.isSER=true;D.url=G[E];D.queryParam=C.SEARCH_ENGINE_REGEXP[F].queryParam;break}}if(D.isSER===true){break}}return D},isSearchEngineReference:function(){return(c.ruleExecutor.util.getSearchEngineMatchResult()).isSER},isSocialMediaReference:function(){return c.ruleExecutor.util.isMatches(c.ruleExecutor.util.getReferrers(),C.SOCIAL_MEDIA_REGEX)},isFirstTime:function(){var D=u.getSessionCookie();return(D&&(typeof D.isFirstTime==="boolean"&&D.isFirstTime))?true:false},getSearchTerms:function(){var F=null;var D=c.ruleExecutor.util.getSearchEngineMatchResult();if(D.isSER){var E=decodeURI(c.ruleExecutor.util.getParamValue(D.url,D.queryParam));if(E){F=c.ruleExecutor.util.jsTokenizer(E," ")}}return F},jsTokenizer:function(G,I){var H=[];if(G!==e&&G){var F=u.escapeForRegExp(",\r\n");if(I!==e&&I){if(I instanceof Array){F=u.escapeForRegExp(I.join(""))}else{F=u.escapeForRegExp(I)}}G=G.replace(new RegExp("["+F+"]","g"),"\n");var D=G.split(/\n/g);for(var E=0;E<D.length;E++){if(D[E]!=""){H[H.length]=D[E]}}}return H},getParamValue:function(E,G){var H="";var F=new RegExp("[\\?&]"+G+"=([^&#]*)");var D=F.exec(E);if(D!==null){H=D[1]}return H},getBrowser:function(){return c.BrowserDetect.browser()},getBrowserVersion:function(){return c.BrowserDetect.version()},getOS:function(){return c.BrowserDetect.os()},getDevice:function(){return c.BrowserDetect.device()},escapeForRegExp:function(D){return u.escapeForRegExp(D)},getTotalPageView:function(){var D=u.getSessionCookie();return(D&&D.pvc)?D.pvc:1},sampling:function(D){var E=this.entityId||D;if(E){var F=u.getWebengageCookie(),G=u.getHashCode(E+F.luid);return Math.abs(G%100)}return 0},getSessionCookieReferer:function(){var D=u.getSessionCookie();var E=D.referrer;if(!E){return null}return E},getXpathStringResult:function(D){if(c.ruleExecutor.dependency.util.xPathExists()){return c.XPATH.util.evaluateXPathQuery(D)}},getXpathIntegerResult:function(E){if(c.ruleExecutor.dependency.util.xPathExists()){var D=c.XPATH.util.evaluateXPathQuery(E);if(D){return parseFloat(D)}else{return null}}},loadDependency:function(D,F,H,E){var G=c.ruleExecutor.dependencies[D];if(G&&(typeof G==="function")){G(F,H,E)}else{if(E&&typeof E=="function"){E()}}}}})(c.ruleExecutor.constants));u.extend("ruleExecutor",(function(F,E){var C={};var D=function(){C={referer:F.getReferrers,url:u.getClientPageUrl(),cookie:function(G){return u.getCookie(G,true)},country:F.getCountry,region:F.getRegion,city:F.getCity,time:"",isFirstTime:F.isFirstTime,isSER:F.isSearchEngineReference,isSMR:F.isSocialMediaReference,searchTerms:F.getSearchTerms,os:F.getOS,device:F.getDevice,browser:F.getBrowser,endUserTime:F.getClientTime,publisherTime:F.getPublisherTime,browser_version:F.getBrowserVersion,totalPageView:F.getTotalPageView,sampling:F.sampling,contentXPathString:F.getXpathStringResult,contentXPathInteger:F.getXpathIntegerResult,contentXPathNode:F.getXpathStringResult,isDirectVisitor:F.getSessionCookieReferer,dayOfWeek:F.getClientDayOfWeek}};D();return{execute:function(H,J,G){var I=u.copy({},C);I=u.copy(I,(G?G:{}),true);I.entityId=H;J=(J!==e)?J:true;return(new Function("_weUtil","_ruleUtil","_constants","operands","return ("+J+");")(u,F,E,I))},loadOperands:function(){D()}}})(c.ruleExecutor.util,c.ruleExecutor.constants));u.extend("survey",(function(){var F=[],G=function(P,J){if(P!==e&&P){var Q=this,M=A.survey.config,O=M.theme||"",K="320px",T="1px",S=a.createElement("div");if(Q._surveyOptions.width){var N=parseInt(Q._surveyOptions.width,10);if(!isNaN(N)){K=N+"px"}}Q.height=T;Q.width=K;Q.surveyConfigDto=M;Q.theme=O;Q.surveyEId=P;Q._weProperties=s;Q.showOnExit=(typeof J==="boolean"?J:false);Q.isMobileSurvey=(typeof isMobileSurvey=="boolean"?isMobileSurvey:false);var R=Q._surveyOptions.scope[P]||Q._surveyOptions.scope.all||null;if(R){Q.scope=(R.scope?R.scope:"");Q.scopeType=(R.scopeType?R.scopeType:"")}s.widgetContainer.appendChild(S);S.setAttribute("id",s.widgetContainerId+"-survey-content");a.$SurveyWidgetInitializer={currentInstance:Q,containerId:s.widgetContainerId,licenseCode:m,appHost:s.surveyAppHost,width:parseInt(K,10)};var L=s.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?s.loadSurveyWidgetUrlv3:s.loadSurveyWidgetUrl(Q.layoutAttributes.id));u.withWeJquery(function(){var U=a.createElement("script");U.type="text/javascript";U.src=L;s.widgetContainer.appendChild(U)})}},E=function(M,O,J){if(M!==e&&M){if(typeof M==="object"){if(M instanceof Array){for(var K=0;K<M.length;K++){E(M[K],O,J)}}else{var L=M.scope;if(L){var N=M.surveyIds;if(N!==e&&N instanceof Array&&N.length>0){for(j=0;j<N.length;j++){J[N[j]]={scope:L,scopeType:(M.scopeType||"")}}}else{J.all={scope:L,scopeType:(M.scopeType||"")}}}}}else{J.all={scope:M,scopeType:(O||"")}}}},C=function(P,K,S){if(P&&P.length>0){var ag=(new Array()).concat(P);var aj=ag[0],W=u.getSessionCookie(),ac=u.getWebengageCookie(),V=u.getInitParamValue(S._surveyOptions,"alignment",A.survey.config.alignment,["left","right"]),U=aj,Z=K[U].ruleCode,aa=K[U]["la"],L=K[U].startTimestamp,N=K[U].endTimestamp,O=(typeof K[U].showOnExit==="boolean")?K[U].showOnExit:false,Q=(O?0:(K[U].totalTimeOnSite?K[U].totalTimeOnSite-((new Date()).getTime()-(W.sst||0)):0)),ai=(O?0:((parseInt(S._surveyOptions.delay,10)>=0)?parseInt(S._surveyOptions.delay,10):Math.max(Q,K[U].timeSpent))),ae=K[U].maxTimesPerUser,M=S._surveyOptions.scope[U]||S._surveyOptions.scope.all||null,ab=U+(M&&M.scope&&(M.scopeType+"").toUpperCase()!="GLOBAL"?"["+u.escapeScopeChars(M.scope)+"]":""),af=u.escapeForRegExp(ab),J=K[U].mobile;if(!S._surveyOptions.isDemoMode){if(typeof J!=="undefined"&&J&&!c.BrowserDetect.isMobile()){P.splice(0,1);return C(P,K,S)}if(!S._surveyOptions.forcedRender&&((W&&W.closedSurveys!==e&&(W.closedSurveys.match("##"+af+"##")||W.closedSurveys.match("##"+af+"$")))||(ac&&ac.takenSurveys!==e&&(ac.takenSurveys.match("##"+af+"##")||ac.takenSurveys.match("##"+af+"$"))))){ag.splice(0,1);return C(ag,K,S)}var Y=c.util.getTotalTimesShown(U,"survey");if(ae!==e){if(ae<=Y){ag.splice(0,1);return C(ag,K,S)}}var R={timeSpent:ai,showOnExit:O,maxTimesPerUser:ae,startTimestamp:L,endTimestamp:N,ruleCode:Z,layoutAttributes:aa};D(U,R,S,function(){ag.splice(0,1);return C(ag,K,S)})}else{var R={timeSpent:ai,showOnExit:O,maxTimesPerUser:ae,startTimestamp:L,endTimestamp:N,ruleCode:Z,layoutAttributes:aa};if(!S.surveysToExecuteData){S.surveysToExecuteData={}}S.surveysToExecuteData[U]=R;ag.splice(0,1);return C(ag,K,S)}}else{if(S.surveysToExecuteData){var ah=null;var ad=[];for(var aj in S.surveysToExecuteData){var X=aj;ad[ad.length]=X;ah=((ah==null||ah>S.surveysToExecuteData[X]["timeSpent"])?S.surveysToExecuteData[X]["timeSpent"]:ah)}var T=S.startExecutionTime?(new Date()).getTime()-S.startExecutionTime:0;S.totalTimeElapsed=S.totalTimeElapsed+T;S.minTimespentVal=(ah-T<0)?0:ah-T;return H(ad,S.surveysToExecuteData,S)}}},D=function(J,N,O,R){try{if(N.startTimestamp||N.endTimestamp){if(c.ruleExecutor.dependency.util.geoDataExists()){var Q=u.getSessionCookie(),P=(new Date()).getTime()+(Q.tsD&&!isNaN(Q.tsD)?parseInt(Q.tsD,10):0),M=N.startTimestamp,K=N.endTimestamp;if(K<P||P<M){return R()}}}if((O._surveyOptions.skipRules)||(!N.ruleCode)||(c.ruleExecutor.execute(J,N.ruleCode,O._surveyOptions.ruleData))){if(!O.surveysToExecuteData){O.surveysToExecuteData={}}O.surveysToExecuteData[J]=N}return R()}catch(L){if(L&&L.type){c.ruleExecutor.util.loadDependency(L.type,N,function(){D(J,N,O,R)},R)}else{c.eLog(L);R()}}},I=function(M,K,N,J,L){totlatTimeElapsed=0;timespent=0;if(!N){if(arguments&&arguments[0]){timespent=K||0}if(parseInt(L._surveyOptions.delay,10)>=0){timespent=parseInt(L._surveyOptions.delay,10)}totlatTimeElapsed=L.totalTimeElapsed+L.minTimespentVal}c.setTimeout(function(){G.apply(L,[M,N])},((timespent-totlatTimeElapsed)<0?0:(timespent-totlatTimeElapsed)))},H=function(J,K,L){c.setTimeout(function(){if(!L._surveyOptions.forcedRender){var M=[];for(var O=0;O<J.length;O++){if(O>0){M[M.length]="&"}M[M.length]="surveyIds="+J[O]}var N=s.findAllTakenSurveysUrl()+"&"+M.join("")+(L._surveyOptions.scope?"&scope="+encodeURIComponent(u.stringify(L._surveyOptions.scope)):"");u.loadScript.apply(s.widgetContainer,[N,function(R,T,S){var Y=[],U={};if(typeof we_notToExecuteSurveyIdsMap!="undefined"){if(we_notToExecuteSurveyIdsMap.takenSurveyIds!==e&&we_notToExecuteSurveyIdsMap.takenSurveyIds.length>0){for(var Q=0;Q<we_notToExecuteSurveyIdsMap.takenSurveyIds.length;Q++){var Z=L._surveyOptions.scope[we_notToExecuteSurveyIdsMap.takenSurveyIds[Q]]||L._surveyOptions.scope.all||null;var ab=(Z&&Z.scope?Z.scope:"");var X=(Z&&Z.scopeType?Z.scopeType:"");U[we_notToExecuteSurveyIdsMap.takenSurveyIds[Q]]=true;u.markSurveyAsTaken((we_notToExecuteSurveyIdsMap.takenSurveyIds[Q]+(ab&&(X+"").toUpperCase()!="GLOBAL"?"["+u.escapeScopeChars(ab)+"]":"")))}}if(we_notToExecuteSurveyIdsMap.inactiveSurveyIds!==e&&we_notToExecuteSurveyIdsMap.inactiveSurveyIds.length>0){for(var W=0;W<we_notToExecuteSurveyIdsMap.inactiveSurveyIds.length;W++){U[we_notToExecuteSurveyIdsMap.inactiveSurveyIds[W]]=true}}}for(var aa=0;aa<T.length;aa++){if(!U[T[aa]]){Y[Y.length]=T[aa]}}if(Y.length>0){var V=Y[0];L.layoutAttributes=R[V]["layoutAttributes"];I(V,(R[V]["timeSpent"]||0),R[V]["showOnExit"],R[V]["maxTimesPerUser"],L)}},[K,J,L.totalTimeElapsed]])}else{var P=J[0];L.layoutAttributes=K[P]["layoutAttributes"];I(P,(K[P]["timespent"]||0),K[P]["showOnExit"],K[P]["maxTimesPerUser"],L)}},L.minTimespentVal)};return{cbid:1,render:function(J){return c.withELog(function(){return(new function(){c.survey.clear();var N=this;N.cbid=1;F[F.length]=N;N.abort=function(){u.abortInstance(this)};var L={surveyId:f["webengage.survey.surveyId"]||"",skipRules:f["webengage.survey.skipRules"]||false,forcedRender:f["webengage.survey.forcedRender"]||false,delay:f["webengage.survey.delay"]||-1,customData:f["webengage.survey.customData"]||f["webengage.customData"]||{},ruleData:f["webengage.survey.ruleData"]||f["webengage.ruleData"]||{},isDemoMode:f["webengage.survey.isDemoMode"]||f["webengage.isDemoMode"]||false,alignment:f["webengage.survey.alignment"]||"",scope:f["webengage.survey.scope"]||f["webengage.scope"]||"",scopeType:f["webengage.survey.scopeType"]||f["webengage.scopeType"]||"",enableCallbacks:f["webengage.survey.enableCallbacks"]||f["webengage.enableCallbacks"]||false,width:f["webengage.survey.width"]};var T={showAllClosedAndTakenSurveys:"forcedRender",data:"customData",demo:"isDemoMode"};if(J!==e&&!u.isEmptyObject(J)){for(var K in J){var O=T[K];if(O!==e&&O){J[O]=J[K];delete J[K]}}}N._surveyOptions=u.copy(L,(J?J:{}),true);N._surveyOptions.forcedRender=typeof N._surveyOptions.forcedRender==="boolean"?N._surveyOptions.forcedRender:false;if(N._surveyOptions.forcedRender){N._surveyOptions.scope=(new Date()).getTime();N._surveyOptions.scopeType="session"}var M={};E(N._surveyOptions.scope,N._surveyOptions.scopeType,M);N._surveyOptions.scope=M||"";N.enableCallbacks=(typeof N._surveyOptions.enableCallbacks==="boolean"?N._surveyOptions.enableCallbacks:false);if(A.survey&&(A.survey.isEnabled||N._surveyOptions.isDemoMode)&&!u.isEmptyObject(A.survey.ruleMap)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&A.sslEnabled))&&!A.isSRQuotaOver){u.copy(N,y,true);N.onLoad((N._surveyOptions.onLoad||f["webengage.survey.onLoad"]));N.onSubmit((N._surveyOptions.onSubmit||f["webengage.survey.onSubmit"]));N.onClose((N._surveyOptions.onClose||f["webengage.survey.onClose"]));N.onOpen((N._surveyOptions.onOpen||f["webengage.survey.onOpen"]));N.onComplete((N._surveyOptions.onComplete||f["webengage.survey.onComplete"]));N.dump=function(Y){var Z=this;var X={id:Z.surveyEId,layoutId:Z.layout};X.tvc=u.getTotalTimesShown(Z.surveyEId,"survey");X.tvcs=u.getTotalTimesShown(Z.surveyEId,"survey",true);if(!u.isEmptyObject(Z.layoutAttributes)){X.layoutAttrs=Z.layoutAttributes}if(Z.theme){X.theme=Z.theme}if(Z.showOnExit){X.showOnExit=Z.showOnExit}if(!u.isEmptyObject(Z._surveyOptions.ruleData)){var U=Z._surveyOptions.ruleData;X.ruleData={};for(var V in U){if(U[V]&&U[V].constructor==Date){X.ruleDataDate=X.ruleDataDate||{};X.ruleDataDate[V]=U[V];continue}X.ruleData[V]=U[V]}}if(!u.isEmptyObject(Z._surveyOptions.customData)){var W=Z._surveyOptions.customData;X.customData={};for(var V in W){if(W[V]&&W[V].constructor==Date){X.customDataDate=X.customDataDate||{};X.customDataDate[V]=W[V];continue}X.customData[V]=W[V]}}c.dump("survey",Y,X)};u.attachEventListners("survey",N);N.totalTimeElapsed=0;var P=A.survey.ruleMap,S=A.survey.order,Q=N._surveyOptions.surveyId;if(Q&&P[Q]){var R=[];R[0]=Q;S=R}N.startExecutionTime=(new Date()).getTime();C(S,P,N)}else{if(A.survey&&A.survey.isEnabled&&a.location.protocol=="https:"&&!A.sslEnabled){c.eLog(null,"error","Survey - Widget turned off for SSL encrypted page","Survey - Widget turned off for SSL encrypted page")}}})})},clear:function(){c.withELog(function(){try{if(a.getElementById(s.widgetContainerId+"-base")){var J=a.getElementsByTagName("webengagedata")[0]}else{s.widgetContainer.removeChild(a.getElementById(s.widgetContainerId+"-survey-content"))}}catch(K){}a.$SurveyWidgetInitializer=null;F=[]})},abort:function(){u.abortAllInstances(F)},attachEventListner:function(){var J=this,K=arguments;c.withELog(function(){u.bind.apply(J,K);if(F.length>0){for(var L=0;L<F.length;L++){F[L].enableCallbacks=true;u.bind.apply(F[L],K)}}})}}})());u.extend("IFRAMES",(function(){var C=[];return{create:function(F,H,J){this.remove(F);var K=J||{};var D;try{D=a.createElement('<iframe name="'+F+'">')}catch(I){D=a.createElement("iframe");D.name=F}D.id=F;if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){D.src="javascript:void(0);"}D.frameBorder=K.frameBorder||"0";D.marginHeight=K.marginHeight||"0";D.marginWidth=K.marginWidth||"0";D.allowTransparency=K.allowTransparency||"true";var E=D.style;E.zIndex=(u.getMaxZIndex()+1);E.position="absolute";E.backgroundColor=K.backgroundColor||"transparent";E.bottom=K.bottom||"0px";E.right=K.right||"0px";E.border=K.border||"none";E.overflow=K.overflow||"hidden";E.visibility=K.visibility||"hidden";var G=H||s.widgetContainer;G.appendChild(D);C[F]=D;try{D.contentWindow.name}catch(I){c.eLog(I);D.src='javascript:(function () {document.open();document.domain="'+a.domain+'";document.close();})();'}if(typeof(K.onload)==="function"){u.addListener(D,"load",K.onload)}return D},get:function(D){return C[D]},resize:function(E,D,F){var G=c.IFRAMES.get(E);G.style.height=D+"px"},remove:function(D){var E=c.IFRAMES.get(D);if(E){if(E.parentNode){E.parentNode.removeChild(E)}}if(d.frames[D]){delete d.frames[D]}delete C[D]},creatCallbackFrame:function(G,E,J,D){var I={};if(typeof(D)==="function"){I.onload=function(){c.withELog(function(){var M=C[G];if(!M.widgetCallBackStatus||M.widgetCallBackStatus===0){M.widgetCallBackStatus=1}else{if(M.widgetCallBackStatus===1){M.contentWindow.location="about:blank";M.widgetCallBackStatus=2}else{if(M.widgetCallBackStatus===2){var N=(new Date()).getTime()+"CB";if(!c.IFRAMES.CB){c.IFRAMES.CB={}}c.IFRAMES.CB[N]=function(O){setTimeout(function(){if(O!==e&&O!==""){try{var Q=u.parseJSON(O);if(Q!==null){if(Q.eventName!==e){D(Q.eventName,Q.data)}}}catch(P){c.eLog(P)}}M.widgetCallBackStatus=0;c.IFRAMES.remove(G);M=c.IFRAMES.creatCallbackFrame(G,E,J,D)},10)};try{var K=M.contentWindow.name;c.IFRAMES.CB[N](K)}catch(L){c.eLog(L);M.src="javascript:(function () {document.write('<script>var _data=window.name;document.domain=\""+a.domain+'";setTimeout(function(){window.parent.webengage.IFRAMES.CB["'+N+"\"](_data);}, 10);<\/script>')})();"}}}}})}}var H=c.IFRAMES.create(G,E,I);var F=H.style;F.height=0;F.width=0;if(J){H.src=J}return H}}})());u.extend("notification",(function(){var G=[],D=function(O,N,M,I){var Q=this;if(O||Q._notificationOptions.previewJson!==e){Q.notificationId=Q.notificationEId=O;Q.showOnExit=I;Q.layout=N||(Q._notificationOptions.previewJson&&Q._notificationOptions.previewJson.layout?Q._notificationOptions.previewJson.layout:"");var P=Q.executeCallbacks("run",Q);if(typeof P==="boolean"&&!P){return}var K=c.IFRAMES.create(s.widgetContainerId+"-notification-frame",s.widgetContainer);K.style.top="-1000px";K.style.left="-1000px";var S=u.getSessionCookie();var L=null;if(K.contentDocument){L=K.contentDocument}else{if(K.contentWindow){L=K.contentWindow.document}else{if(K.document){L=K.document}}}L.open();var J=(Q.layout===""?"notification-base.css":Q.layout+"-notification-base.css");var H=(c.BrowserDetect.ie()&&c.BrowserDetect.version()<8)?'<link rel="stylesheet" type="text/css" href="//d3701cc9l7v9a6.cloudfront.net/css/responsive/assets/css/font/webengage/widget-font-ie7/ie7.css?v=335.0" media="screen"/><script type="text/javascript" src="//d3701cc9l7v9a6.cloudfront.net/css/responsive/assets/css/font/webengage/widget-font-ie7/ie7.js?v=335.0"><\/script><style type="text/css">.icon-large{font-size:1.3333333333333333em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}.icon-extra-large{font-size:2em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}</style>':"";var R=(c.BrowserDetect.ie()&&c.BrowserDetect.version()===8)?'<style type="text/css">.icon-large{font-size:1.3333333333333333em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}.icon-extra-large{font-size:2em;margin-top:-4px;padding-top:3px;margin-bottom:-4px;padding-bottom:3px;vertical-align:middle;}</style>':"";L.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="cache-control" content="max-age=0" /><meta http-equiv="cache-control" content="no-cache" /><meta http-equiv="pragma" content="no-cache" /><meta http-equiv="content-type" content="text/html; charset=utf-8"/><link id="widget-font-id" rel="stylesheet" type="text/css" href="//d3701cc9l7v9a6.cloudfront.net/css/responsive/assets/css/font/webengage/widget-font.css?v=335.0" media="screen"/><link rel="stylesheet" type="text/css" href="//d3701cc9l7v9a6.cloudfront.net/css/webengage/notification/'+J+'?v=335.0" media="screen"/>'+H+R+'<script type="text/javascript">try{window.parent.window.name}catch(e){document.domain="'+a.domain+'";};<\/script><script type="text/javascript" src="//d3701cc9l7v9a6.cloudfront.net/js/jquery/jquery-1.3.2.min.js"><\/script></head><body class="notification-body"><script type="text/javascript">window.onload = function () { (function(d){ var _script = d.createElement("script"); _script.type = "text/javascript"; _script.src = "'+s.widgetDomain+s.notificationWidgetScriptUrl+'"; d.body.appendChild(_script); })(document);};<\/script></body></html>');L.close();c.setTimeout(function(){if(Q._notificationOptions.previewJson!==e){L.$NotificationWidgetInitializer={currentInstance:Q,notificationVersion:M,containerId:s.widgetContainerId,licenseCode:m,appHost:s.baseWebEngageUrl,widgetDomain:s.widgetDomain,previewJson:Q._notificationOptions.previewJson}}else{L.$NotificationWidgetInitializer={currentInstance:Q,notificationVersion:M,containerId:s.widgetContainerId,licenseCode:m,appHost:s.baseWebEngageUrl,widgetDomain:s.widgetDomain,browser:c.BrowserDetect.browser(),browserVersion:c.BrowserDetect.version(),os:c.BrowserDetect.os(),country:S.country||"",city:S.city||"",region:S.region||"",pageTitle:a.title,ip:S.ip,referrer:a.referrer}}},0)}},C=function(M,I,O){if(M&&M.length>0){var S=(new Array()).concat(M);var ab=S[0],W=u.getWebengageCookie(),Q=u.getSessionCookie(),H=ab,Y=I[H].layout,K=(webengage_fs_configurationMap.config.notificationConfig.wl?"W":"N")+I[H].version,V=I[H].ruleCode,L=(I[H].totalTimeOnSite?I[H].totalTimeOnSite-((new Date()).getTime()-(Q.sst||0)):0),aa=((parseInt(O._notificationOptions.delay,10)>=0)?parseInt(O._notificationOptions.delay,10):Math.max(L,I[H].timespent)),N=I[H].skipTargetPage,T=I[H].actionLinks,J=(typeof I[H].showOnExit==="boolean"?I[H].showOnExit:false),Z=I[H].maxTimesPerUser,R=I[H].mobile;if(!O._notificationOptions.isDemoMode){if(typeof R!=="undefined"&&R&&!c.BrowserDetect.isMobile()){S.splice(0,1);return C(S,I,O)}if(!O._notificationOptions.forcedRender&&((Q&&Q.closedNIds!==e&&Q.closedNIds.indexOf("##"+H)>=0)||(W&&W.takenNIds!==e&&W.takenNIds.indexOf("##"+H)>=0))){S.splice(0,1);return C(S,I,O)}if(N&&T instanceof Array&&T.length>0){for(var X in T){var P=a.createElement("a");P.href=T[X];T[X]="^"+u.escapeForRegExp(P.href)+"$";P=null}if(c.ruleExecutor.util.isMatches(u.getClientPageUrl(),T)){S.splice(0,1);return C(S,I,O)}}var U=c.util.getTotalTimesShown(H,"notification");if(!O._notificationOptions.isDemoMode&&Z!==e){if(Z<=U){S.splice(0,1);return C(S,I,O)}}I[H]["timeSpent"]=aa;F(H,I[H],O,function(){S.splice(0,1);return C(S,I,O)})}else{I[H]["timeSpent"]=aa;E(H,I[H],O)}}},F=function(M,H,N,Q){try{if(H.startTimestamp||H.endTimestamp){if(c.ruleExecutor.dependency.util.geoDataExists()){var P=u.getSessionCookie();var O=(new Date()).getTime()+(P.tsD&&!isNaN(P.tsD)?parseInt(P.tsD,10):0);var L=H.startTimestamp,I=H.endTimestamp;if(I<O||O<L){return Q()}}}if((N._notificationOptions.skipRules)||(!H.ruleCode)||(c.ruleExecutor.execute(M,H.ruleCode,N._notificationOptions.ruleData))){var J=N.startExecutionTime?(new Date()).getTime()-N.startExecutionTime:0;N.totalTimeElapsed=N.totalTimeElapsed+J;return E(M,H,N)}else{return Q()}}catch(K){if(K&&K.type){c.ruleExecutor.util.loadDependency(K.type,H,function(){F(M,H,N,Q)},Q)}else{c.eLog(K);Q()}}},E=function(K,I,J){var H=I.timeSpent||0;if(parseInt(J._notificationOptions.delay,10)>=0){H=parseInt(J._notificationOptions.delay,10)}function L(){u.withWeJquery(function(){c.setTimeout(function(){D.apply(J,[K,I.layout,I.version,I.showOnExit])},(I.showOnExit?0:((H-J.totalTimeElapsed)<0?0:(H-J.totalTimeElapsed))))})}c.GEO.load(L,L)};return{cbid:1,render:function(H){return c.withELog(function(){return(new function(){c.notification.clear();var N=this;N.cbid=1;G[G.length]=N;N.abort=function(){u.abortInstance(this)};var J={notificationId:f["webengage.notification.notificationId"]||"",skipRules:f["webengage.notification.skipRules"]||false,delay:f["webengage.notification.delay"]||-1,isDemoMode:f["webengage.notification.isDemoMode"]||f["webengage.isDemoMode"]||false,customData:f["webengage.notification.customData"]||f["webengage.customData"]||{},ruleData:f["webengage.notification.ruleData"]||f["webengage.ruleData"]||{},tokens:f["webengage.notification.tokens"]||f["webengage.tokens"]||{},previewJson:f["webengage.notification.previewJson"],forcedRender:f["webengage.notification.forcedRender"]||false,enableCallbacks:f["webengage.notification.enableCallbacks"]||f["webengage.enableCallbacks"]||false};var K={data:"customData",demo:"isDemoMode"};if(H!==e&&!u.isEmptyObject(H)){for(var I in H){var O=K[I];if(O!==e&&O){H[O]=H[I];delete H[I]}}}N._notificationOptions=u.copy(J,(H?H:{}),true);N.enableCallbacks=(typeof N._notificationOptions.enableCallbacks==="boolean"?N._notificationOptions.enableCallbacks:false);u.copy(N,y,true);N.onRun((N._notificationOptions.onRun||f["webengage.notification.onRun"]));N.onLoad((N._notificationOptions.onLoad||f["webengage.notification.onLoad"]));N.onClick((N._notificationOptions.onClick||f["webengage.notification.onClick"]));N.onClose((N._notificationOptions.onClose||f["webengage.notification.onClose"]));N.onOpen((N._notificationOptions.onOpen||f["webengage.notification.onOpen"]));u.attachEventListners("notification",N);N.dump=function(V){var W=this;var U={id:W.notificationId,layoutId:W.layout};U.tvc=u.getTotalTimesShown(W.notificationId,"notification");U.tvcs=u.getTotalTimesShown(W.notificationId,"notification",true);if(!u.isEmptyObject(W.layoutAttributes)){U.layoutAttrs=W.layoutAttributes}if(!u.isEmptyObject(W.config)){U.theme=W.config}if(!u.isEmptyObject(W._notificationOptions.tokens)){U.tokens=u.copy({},W._notificationOptions.tokens)}if(!u.isEmptyObject(W._notificationOptions.ruleData)){var R=W._notificationOptions.ruleData;U.ruleData={};for(var S in R){if(R[S]&&R[S].constructor==Date){U.ruleDataDate=U.ruleDataDate||{};U.ruleDataDate[S]=R[S];continue}U.ruleData[S]=R[S]}}if(!u.isEmptyObject(W._notificationOptions.customData)){var T=W._notificationOptions.customData;U.customData={};for(var S in T){if(T[S]&&T[S].constructor==Date){U.customDataDate=U.customDataDate||{};U.customDataDate[S]=T[S];continue}U.customData[S]=T[S]}}if(W.clickedCTA){U.cta=W.clickedCTA}c.dump("notification",V,U)};if(N._notificationOptions.previewJson!==e){u.withWeJquery(function(){D.apply(N)})}else{if(A.notification&&(A.notification.isEnabled||N._notificationOptions.isDemoMode)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&A.sslEnabled))&&!A.isNQuotaOver){var P=A.notification.order,L=A.notification.ruleMap;N.totalTimeElapsed=0;var M=N._notificationOptions.notificationId;if(M&&L[M]){var Q=[];Q[0]=M;P=Q}N.startExecutionTime=(new Date()).getTime();C(P,L,N)}else{if(A.notification&&A.notification.isEnabled&&a.location.protocol=="https:"&&!A.sslEnabled){c.eLog(null,"error","Notification - Widget turned off for SSL encrypted page","Notification - Widget turned off for SSL encrypted page")}}}})})},getNotificationFrame:function(){return a.getElementById(s.widgetContainerId+"-notification-frame")},resize:function(J){var I=a.getElementById(s.widgetContainerId+"-notification-frame");I.height=J.height||I.contentWindow.document.body.scrollHeight;I.width=J.width||I.contentWindow.document.body.scrollWidth;var H=I.style;H.visibility="visible";H.height=parseInt(J.height||I.contentWindow.document.body.scrollHeight)+"px";H.width=parseInt(J.width||I.contentWindow.document.body.scrollWidth)+"px";H.top="auto";H.bottom="0px";H.left="auto";if("right"==J.launchType){H.right="0px"}else{H.left="0px"}},clear:function(){var H=this;c.withELog(function(){try{c.IFRAMES.remove(s.widgetContainerId+"-notification-frame")}catch(I){}G=[]})},abort:function(){u.abortAllInstances(G)},attachEventListner:function(){var H=this,I=arguments;c.withELog(function(){u.bind.apply(H,I);if(G.length>0){for(var J=0;J<G.length;J++){G[J].enableCallbacks=true;u.bind.apply(G[J],I)}}})}}})());u.extend("",{abort:function(){c.withELog(function(){c.feedback.abort();c.survey.abort();c.notification.abort()})}});u.extend("",{init:function(C){var D=function(E){if(C[E]!==e&&C[E]){f["webengage."+E]=C[E]}};D("licenseCode");D("language");D("isDemoMode");D("delay");f["webengage.widgetVersion"]="3.0";if(f["webengage.licenseCode"]!==e&&f["webengage.licenseCode"]){u.onDocReady(t)}return c}});u.extend("",{onReady:function(C){if(C!==e&&typeof C==="function"){f["webengage.oldOnReady"]=C}}});u.extend("",{render:function(C){if(C){if(C.showFeedbackByDefault!==e&&!C.showFeedbackByDefault){f["webengage.feedback.defaultRender"]=false}if(C.showSurveyByDefault!==e&&!C.showSurveyByDefault){f["webengage.survey.defaultRender"]=false}if(C.showNotificationByDefault!==e&&!C.showNotificationByDefault){f["webengage.notification.defaultRender"]=false}}o()}});var t=function(){m=f["webengage.licenseCode"];var E=a.createElement("webengagedata");a.body.insertBefore(E,null);s.weDataContainer=E;try{var I=a.createElement("style");var F=a.createTextNode("#webklipper-publisher-widget-container, #webklipper-publisher-widget-container * {overflow:visible; -webkit-box-sizing: content-box; -moz-box-sizing: content-box;  box-sizing: content-box;}");I.type="text/css";if(I.styleSheet){I.styleSheet.cssText=F.nodeValue}else{I.appendChild(F)}s.weDataContainer.appendChild(I)}catch(H){}var C=a.createElement("div");C.setAttribute("id",s.widgetContainerId);s.weDataContainer.appendChild(C);s.widgetContainer=C;var D=u.getWebengageCookie();if(!D){D=u.setWebengageCookie()}else{if(!D.luid){D=u.setWebengageCookie(u.getWebengageCookie())}}var G=u.getSessionCookie();if(!G||!G.suid){G=u.setSessionCookie(u.getSessionCookie(),true);D=u.updateTSC()}D=u.updateTPVC();if(typeof D.isGzip==="undefined"||!D.isGzip){u.loadScript.apply(s.widgetContainer,["//z.webengage.com/gz.js",function(){D=u.setGZIPFlag((typeof f.isGzip!="undefined"&&f.isGzip?true:false));p(D.isGzip,D.luid,G.suid)}])}else{p(D.isGzip,D.luid,G.suid)}};var p=function(D,E,C){d.webengage.setTimeout(function(){var G=(D?"webengage-zfiles":"webengage-files");var F="//s3.amazonaws.com/"+G+"/webengage/"+m+"/v3.js?r="+Math.floor((new Date()).getTime()/60000)+"&u="+E+"|"+C;u.loadScript.apply(s.widgetContainer,[F,function(){var H=c.setInterval(function(){if(typeof webengage_fs_configurationMap!=="undefined"&&webengage_fs_configurationMap.config){clearInterval(H);if(((webengage_fs_configurationMap.sites!==e&&webengage_fs_configurationMap.sites)||(webengage_fs_configurationMap.domain!==e&&webengage_fs_configurationMap.domain))&&!f["webengage.isDemoMode"]){var N=false;var I=u.getClientPageHost(),L;if(I.match(/\:[\d]*$/)){L=I.substring(I.indexOf(":")+1,I.length);I=I.substring(0,I.indexOf(":"))}var T=[];var O=[];if(webengage_fs_configurationMap.sites===e||!webengage_fs_configurationMap.sites){webengage_fs_configurationMap.sites={};webengage_fs_configurationMap.sites[webengage_fs_configurationMap.domain]="DOMAIN"}for(var R in webengage_fs_configurationMap.sites){var P=R,S;if(webengage_fs_configurationMap.sites[R]=="DOMAIN"){T[T.length]=P;if(P.match(/^www\./i)){P=P.substring(4,P.length)}if(P.match(/\:[\d]*$/)){S=P.substring(P.indexOf(":")+1,P.length);P=P.substring(0,P.indexOf(":"))}if((I.match(new RegExp(u.escapeForRegExp(P)+"$","gi"))&&(!S||S==L))){N=true;break}}else{if(webengage_fs_configurationMap.sites[R]=="REGEXP"){var K=P;O[O.length]=P;if((u.getClientPageUrl().match(K))){N=true;break}}}}N=(f["webengage.notification.previewJson"]?true:N);if(!N){var M='The <a style="color: #00f;" href="http://webengage.com/" target="_blank">WebEngage (Survey, Feedback &amp; Notification)</a> widget on this page is incorrectly configured. It is meant for use only on ';if(T.length>0){M+="<b>"+T.join(", ")+"</b>"}if(O.length>0){if(T.length>0){M+=(" and ")}M+=("pages with URLs that matches following regular expression(s) <b>"+O.join(", ")+"</b>")}c.logger.error(M+".");return}}s.publisherTimeZoneOffset=webengage_fs_configurationMap.tzo;u.copy(A,(function(U){return{configurationMap:U?U:{}}})(webengage_fs_configurationMap));var Q=u.getSessionCookie(),J=u.getWebengageCookie();if(!f["webengage.isDemoMode"]&&!Q.vtd){c.dump("visitor","new-session");u.setVTD();u.setLST()}w(G)}},1)},null,function(){}])},(f["webengage.delay"]&&parseInt(f["webengage.delay"])>0?parseInt(f["webengage.delay"]):0))},B=function(G,C,E,F){var D="//s3.amazonaws.com/"+G+"/webengage/"+m+"/"+C[E]+".js?r="+F[E];u.loadScript.apply(s.widgetContainer,[D,function(){if(E==(C.length-1)){g()}else{B.apply(this,[G,C,(E+1),F])}}])},k=function(H){var D=f["webengage.customWidgetCode.ruleData"]||f["webengage.ruleData"]||{};customWidgetCodeIdsToExecuteClient=[];customWidgetCodeIdsToExecuteClientTimestamps=[];if(webengage_fs_configurationMap.cwcRuleList){var F=webengage_fs_configurationMap.cwcRuleList;for(var E=0;E<F.length;E++){var G=F[E].ruleCode;if(G){if(!c.ruleExecutor.execute(F[E].cwcEncId,G,D)){continue}}var C=customWidgetCodeIdsToExecuteClient.length;customWidgetCodeIdsToExecuteClient[C]=F[E].cwcEncId;customWidgetCodeIdsToExecuteClientTimestamps[C]=F[E].lastModifiedTimestamp}}if(customWidgetCodeIdsToExecuteClient.length>0){B.apply(this,[H,customWidgetCodeIdsToExecuteClient,0,customWidgetCodeIdsToExecuteClientTimestamps])}else{g()}},w=function(C){if((a.location.protocol=="http:"||(a.location.protocol=="https:"&&webengage_fs_configurationMap.sslEnabled))){u.usckwl(webengage_fs_configurationMap.domain);if(webengage_fs_configurationMap.cwcRuleList&&webengage_fs_configurationMap.cwcRuleList.length>0){k(C)}else{g()}}else{if(a.location.protocol=="https:"&&!A.sslEnabled){c.eLog(null,"error","Widget turned off for SSL encrypted page","CustomWidgetCode - Widget turned off for SSL encrypted page")}}},g=function(){(function(D){u.extend("widgetConfiguration",{});if(D&&D.config){u.copy(A,{feedback:{isEnabled:(typeof D.config.enableFeedback=="boolean"&&D.config.enableFeedback),config:D.config.feedbackConfig?D.config.feedbackConfig:{}}},true);u.copy(A,{survey:{isEnabled:(typeof D.config.enableSurvey=="boolean"&&D.config.enableSurvey),config:D.config.surveyConfig?D.config.surveyConfig:{},order:[],ruleMap:{}}},true);(function(G){if(D.surveyRuleList){var E=D.surveyRuleList;for(var F=0;F<E.length;F++){G.order[F]=E[F].surveyEncId;G.ruleMap[E[F].surveyEncId]=E[F]}}})(A.survey);u.copy(A,{notification:{isEnabled:(typeof D.config.enableNotification=="boolean"&&D.config.enableNotification),order:[],ruleMap:{}}},true);(function(F){if(D.notificationRuleList){var G=D.notificationRuleList;for(var E=0;E<G.length;E++){F.order[E]=G[E].notificationEncId;F.ruleMap[G[E].notificationEncId]={ruleCode:G[E].ruleCode,timespent:parseInt(G[E].timeSpent)!="NaN"?parseInt(G[E].timeSpent):0,totalTimeOnSite:parseInt(G[E].totalTimeOnSite)!="NaN"?parseInt(G[E].totalTimeOnSite):0,actionLinks:G[E].actionLinks||[],skipTargetPage:typeof(G[E].skipTargetPage)=="boolean"?G[E].skipTargetPage:false,maxTimesPerUser:G[E].maxTimesPerUser,startTimestamp:G[E].startTimestamp,endTimestamp:G[E].endTimestamp,layout:G[E].layout,version:((typeof G[E].v!="undefined")?G[E].v:0),showOnExit:G[E].showOnExit,mobile:G[E].mobile}}}})(A.notification);u.copy(A,{sslEnabled:(D.sslEnabled?D.sslEnabled:false),isSRQuotaOver:(D.isSRQ?D.isSRQ:false),isNQuotaOver:(D.isNQ?D.isNQ:false),isFQuotaOver:(D.isFQ?D.isFQ:false)},true);u.uwats(D.lastWidgetCheckDate)}function C(){if(f["webengage.oldOnReady"]!==e&&typeof f["webengage.oldOnReady"]==="function"){f["webengage.oldOnReady"].apply(this)}else{if(f["webengage.onReady"]!==e&&typeof f["webengage.onReady"]==="function"){f["webengage.onReady"].apply(this);o()}else{o()}}if(c.BrowserDetect.ie()&&c.BrowserDetect.version()<11&&d.attachEvent){d.attachEvent("onbeforeunload",function(){c.withELog(function(){c.winUnloading=true;u.setWebengageCookie(u.getWebengageCookie());u.updateSessionCookie(u.getSessionCookie())})})}}if(D&&D.goals!==e&&D.goals instanceof Array){u.loadScript.apply(s.widgetContainer,[s.csUrl,function(){if(typeof f["webengage.conversion.start"]==="function"){f["webengage.conversion.start"](D)}}])}if(D&&D.GAEnabled){if((f["GA.universalAnalyticsFunction"]&&typeof d[f["GA.universalAnalyticsFunction"]]==="function")||typeof d.ga==="function"||d._gaq){u.loadScript.apply(s.widgetContainer,[s.gaCallbacksScriptUrl,C,null,C])}else{c.eLog(f["webengage.licenseCode"],"error","_gaq/ga undefined - not loading ga-callback-helper","_gaq/ga undefined");C()}}else{C()}})(A.configurationMap)},o=function(){var C=function(E){var D=typeof f["webengage."+E+".defaultRender"]==="boolean"?f["webengage."+E+".defaultRender"]:f["webengage.defaultRender"];return(typeof D==="boolean"?D:true)};if(C("feedback")){setTimeout(function(){c.feedback.render()},1)}if(C("survey")){setTimeout(function(){c.survey.render()},1)}if(C("notification")){setTimeout(function(){c.notification.render()},1)}};if(d.webengageWidgetInit!==e&&typeof d.webengageWidgetInit==="function"){d.webengageWidgetInit()}else{var r=a.getElementsByTagName("webengage")[0];if(r&&r.attributes){var q=r.attributes;f["webengage.licenseCode"]=q.license.value;f["webengage.language"]=(q.language?q.language.value:"");if(q.feedbackButtonAlignment){f["webengage.feedback.alignment"]=q.feedbackButtonAlignment.value}if(q.feedbackExternalLinkId){f["webengage.feedback.externalLinkId"]=q.feedbackExternalLinkId.value}}if(f["webengage.licenseCode"]!==e&&f["webengage.licenseCode"]){u.onDocReady(t)}}if(location.search.indexOf("libraryScript")>-1||sessionStorage.getItem("webengage-library")=="true"){var h=new RegExp("[\\?&]libraryScript=([^&#]*)");var v=h.exec(location.search);var z;if(v!=null){z=decodeURIComponent(v[1]);sessionStorage.setItem("webengage-library-script",z)}else{if(sessionStorage.getItem("webengage-library-script")){z=sessionStorage.getItem("webengage-library-script")}}sessionStorage.setItem("webengage-library","true");if(z){c.util.withWeJquery(function(){c.util.loadScript.apply(s.widgetContainer,["//d3701cc9l7v9a6.cloudfront.net/js/library/"+z+".js?v=335.0",function(){c.feedback.abort();c.survey.abort();c.notification.abort();sessionStorage.setItem("webengage-library",true)}])})}}};if(navigator.appName=="Microsoft Internet Explorer"){if(a.body&&(a.body.readyState=="loaded"||a.body.readyState=="complete")){b()}else{_weUtil.addListner(d,"load",function(){b()})}}else{b()}c.getUser=function(){var g=c.util.getSessionCookie();return{pageUrl:d.location.href,pageTitle:a.title,referrer:(a.referrer||""),browser:c.BrowserDetect.browser(),browserVersion:c.BrowserDetect.version(),platform:c.BrowserDetect.os(),ip:(g?g.ip:""),city:(g?g.city:""),country:(g?g.country:"")}}})(window,document,_weq,webengage)},10);